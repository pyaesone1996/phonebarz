!function(o){var n={};function r(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return o[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=o,r.c=n,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r(r.s=227)}([,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(16),r=(i.prototype.initialProperties=function(){},i.prototype.getInitialSubpackages=function(){return[]},i);function i(){this.componentList=new Set,this.subpackageList=new Set,this.collectAfter=new n.default}e.default=r},,,,,,,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return jQuery(t)}},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(34),l=(i=a.default,r(s,i),Object.defineProperty(s.prototype,"prototypes",{get:function(){return{projection:this.app.objectContainer.get("Editor/Projection/Prototypes"),panelLayout:this.app.objectContainer.get("Editor/PanelLayout/Prototypes"),panel:this.app.objectContainer.get("Editor/Panel/Prototypes"),component:this.app.objectContainer.get("Editor/Component/Prototypes"),control:this.app.objectContainer.get("Editor/Control/Prototypes"),controlSource:this.app.objectContainer.get("Editor/Control/Source/Prototypes")}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"register",{get:function(){return{panelStructures:this.app.objectContainer.get("Editor/Panel/Structures"),components:this.app.objectContainer.get("Editor/Components"),entityTypes:this.app.objectContainer.get("Entity/Register"),componentPresets:this.app.objectContainer.get("Editor/Component/Presets"),controlRulesOperations:this.app.objectContainer.get("Editor/Control/RulesOperation")}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"builders",{get:function(){return{control:this.app.componentRegister.get("Editor/Builder/Control"),panel:this.app.componentRegister.get("Editor/Builder/Panel"),panelLayout:this.app.componentRegister.get("Editor/Builder/PanelLayout"),projection:this.app.componentRegister.get("Editor/Builder/Projection"),component:this.app.componentRegister.get("Editor/Builder/Component")}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"projectEditorComponent",{get:function(){return this.app.objectContainer.get("Editor/ProjectComponent")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"projectEntity",{get:function(){return this.app.objectContainer.get("Editor/ProjectEntity")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"componentBuilder",{get:function(){return this.app.objectContainer.get("ComponentBuilder")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"entityCollector",{get:function(){return this.app.componentRegister.get("Entity/Collector")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"editorPackage",{get:function(){return this.app.packageRegister.get("Editor/Package")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"localizedMessages",{get:function(){return this.app.objectContainer.get("Messages")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"panelManager",{get:function(){return this.app.componentRegister.get("Editor/PanelManager")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"projectionManager",{get:function(){return this.app.componentRegister.get("Editor/ProjectionManager")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"templateLoader",{get:function(){return this.app.componentRegister.get("TemplateLoader")},enumerable:!0,configurable:!0}),s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},,,,,,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return jQuery.extend(t,e)}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(r.prototype.subscribe=function(t,e){!e&&this.defaultContext&&(e=this.defaultContext),e=e||t;var o=this,n={callback:t,event:o,unsubscribe:function(){o.unsubscribe(t)}};return this.callbacks.push({callback:t,subscriber:e}),n},r.prototype.unsubscribe=function(t,e){!e&&this.defaultContext&&(e=this.defaultContext),e=e||t;for(var o=[],n=0;n<this.callbacks.length;n++)this.callbacks[n].callback!==t&&this.callbacks[n].subscriber!==e&&o.push(this.callbacks[n]);this.callbacks=o},r.prototype.trigger=function(t,e){for(var o=0;o<this.callbacks.length;o++)this.callbacks[o].callback.apply(this.callbacks[o].subscriber,[t,e])},r);function r(){this.defaultContext=null,this.callbacks=[]}e.default=n},,,,,,,,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return jQuery.proxy(t,e)}},,,,,,,,,,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(98),r=(Object.defineProperty(i.prototype,"app",{get:function(){return this.package.app},enumerable:!0,configurable:!0}),i.prototype.initialProperties=function(){},i);function i(t){this.eventManager=t||new n.default(this)}e.default=r},,,function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(56),l=(i=a.default,r(s,i),Object.defineProperty(s.prototype,"controlElement",{get:function(){return this.componentElement.find(".control-element")},enumerable:!0,configurable:!0}),s.prototype.attachEvents=function(t){i.prototype.attachEvents.call(this,t),t.addSystemHandler(this.valueChangedEvent,this.onValueChangedEvent),this.isAttached=!0},s.prototype.restoreDefaultOptionValue=function(t){i.prototype.restoreDefaultOptionValue.call(this,t),!this.isAttached&&this.optionValue&&this.setElementValue(this.optionValue)},s.prototype.onValueChangedEvent=function(t){this.setElementValue(t.value)},s.prototype.restoreOptionValue=function(){i.prototype.restoreOptionValue.call(this),this.setElementValue(this.optionValueProp)},s.prototype.updateValueFromElement=function(){this.optionValue=this.getElementValue()},s);function s(){var t=null!==i&&i.apply(this,arguments)||this;return t.isAttached=!1,t}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(141),l=(i=a.default,r(s,i),Object.defineProperty(s.prototype,"titleElement",{get:function(){return this.componentElement.find(".entity-title")},enumerable:!0,configurable:!0}),s.prototype.attachEvents=function(t){i.prototype.attachEvents.call(this,t),this.addElementHandler("click",".actions-wrapper .edit-action",this.onEditClick),this.addElementHandler("click",".actions-wrapper .remove-action",this.onRemoveClick),t.addSystemHandler(this.editorComponent.titleChangedEvent,this.onTitleChanged)},s.prototype.onRemoveClick=function(t){this.projectionManager.removeProjection(this.editorComponent,!0)},s.prototype.onEditClick=function(t){this.panelManager.openPanel(this.editorComponent.entityKey,{},this.editorComponent.entityId)},s.prototype.onTitleChanged=function(t){this.titleElement.html(t.title)},s.prototype.getTemplateContext=function(){return{entity:this.entity}},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},,,,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(100),r=o(101),i=(a.prototype.has=function(t){return void 0!==r.default(this.container,t)},a.prototype.get=function(t){return r.default(this.container,t)},a.prototype.set=function(t,e){var o=this.has(t)?this.get(t):null;r.default(this.container,t,e),"string"==typeof t&&t.split(".").length&&(t=t.split(".")[0]),this.observable.notify(t,e,o)},a);function a(t){this.observable=new n.default,t&&(this.container=t)}e.default=i},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return JSON.parse(JSON.stringify(t))}},,,,,,,,,,,,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return jQuery(t.currentTarget)}},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(76),l=o(16),s=o(75),p=o(67),c=o(68),u=(i=a.default,r(f,i),Object.defineProperty(f.prototype,"panel",{get:function(){return this.panelLayout.panel},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"controlKey",{get:function(){return this.controlStructure.controlKey},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"controlLabel",{get:function(){return this.controlStructure.controlLabel},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"optionKey",{get:function(){return this.controlStructure.optionKey},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"optionValue",{get:function(){return this.optionValueProp},set:function(t){var e=this.optionValueProp,o=!0;(typeof e!=typeof(this.optionValueProp=t)||e&&Array.isArray(e)&&!s.default(e,t)||e&&!Array.isArray(e)&&"object"==typeof e&&!p.default(e,t)||"object"!=typeof e&&e!=t)&&(o=!1),o||this.valueChangedEvent.trigger({oldValue:e,value:t,control:this})},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"isActiveControl",{get:function(){return!this.componentElement.hasClass("control-inactive")},set:function(t){t?(this.componentElement.removeClass("control-inactive"),this.showControlElement()):(this.componentElement.addClass("control-inactive"),this.hideControlElement())},enumerable:!0,configurable:!0}),f.prototype.showControlElement=function(){this.componentElement.slideDown(400)},f.prototype.hideControlElement=function(){this.componentElement.slideUp(400)},f.prototype.getEmptyValue=function(){return null},f.prototype.saveOptionValue=function(){this.controlSource.saveValue()},f.prototype.restoreOptionValue=function(){this.optionValueProp=this.controlSource.getValue()},f.prototype.initialProperties=function(){this.restoreOptionValue(),this.panel.status!=c.default.None&&this.initializeDisplayRules()},f.prototype.attachEvents=function(t){t.addSystemHandler(this.panel.statusChangedEvent,this.onPanelStatusChanged)},f.prototype.restoreDefaultOptionValue=function(t){this.controlStructure.defaultValue&&(t&&null==this.optionValue||!t)&&(this.optionValue=this.controlStructure.defaultValue)},f.prototype.initializeDisplayRules=function(){"object"==typeof this.controlStructure.displayRules&&Object.keys(this.controlStructure.displayRules).length?(this.attachObserversAccordingToRules(this.controlStructure.displayRules),this.checkDisplayRules()):this.restoreDefaultOptionValue(!0)},f.prototype.onPanelStatusChanged=function(t){t.status==c.default.Launched&&this.initializeDisplayRules()},f.prototype.attachObserversAccordingToRules=function(t){if(!(t.hasOwnProperty("relation")&&t.length-1==0||!t.hasOwnProperty("relation")&&0===t.length))for(var e in t){var o=t[e];if("relation"!=e)if(o.hasOwnProperty("relation")||!o.hasOwnProperty("optionKey"))this.attachObserversAccordingToRules(o);else{var n=this.getControlByOptionKey(o.optionKey);if(!n)continue;this.eventManager.addSystemHandler(n.valueChangedEvent,this.checkDisplayRules)}}},f.prototype.checkDisplayRules=function(){this.isActiveControl=this.checkRules(this.controlStructure.displayRules),this.isActiveControl&&this.restoreDefaultOptionValue(!0)},f.prototype.checkRules=function(t){var e="AND",o=Object.keys(t).length;if(t.hasOwnProperty("relation")&&(e=t.relation,o--),!o)return!0;for(var n in t)if("relation"!=n){var r=t[n],i=null;if(r.hasOwnProperty("relation")||!r.hasOwnProperty("optionKey"))i=this.checkRules(r);else{var a=this.getControlByOptionKey(r.optionKey);if(!a)continue;var l=a.optionValue,s=r.operation;if(!this.register.controlRulesOperations.has(s))continue;i=this.register.controlRulesOperations.get(s)(l,r)}if("AND"==e&&!i)return!1;if("OR"==e&&i)return!0}return"AND"==e},f.prototype.getControlByOptionKey=function(t){if(this.contextControls.has(t))return this.contextControls.get(t);if(this.parentControl instanceof f)for(var e=this.parentControl,o=null;e;){if((o=e.getControlByOptionKey(t))instanceof f)return o;if(!(e.parentControl instanceof f))break;e=e.parentControl}return this.panelLayout.controls.has(t)?this.panelLayout.controls.get(t):null},f);function f(){var t=null!==i&&i.apply(this,arguments)||this;return t.parentControl=null,t.contextControls=new Map,t.valueChangedEvent=new l.default,t}e.default=u},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(276),l=(i=a.default,r(s,i),s.prototype.createOptionsRepository=function(){return this.editorComponent.options},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(57),l=o(15),s=(i=a.default,r(p,i),p.prototype.getValidatorOptions=function(){return l.default(i.prototype.getValidatorOptions.call(this),{rules:{entityTitle:{required:!0,minlength:2},optionKey:{required:!0,filterKeyText:!0,filterKeyUniquer:!0,minlength:2},itemsSource:{required:!0},itemsSourceAttribute:{requiredIfActiveControl:!0},itemsSourceCategory:{requiredIfActiveControl:!0},itemsSourceTaxonomy:{requiredIfActiveControl:!0},itemsDisplay:{requiredIfActiveControl:!0},queryType:{requiredIfActiveControl:!0},titleItemReset:{requiredIfActiveControl:!0,minlength:2}}})},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(107),l=(i=a.default,r(s,i),s.prototype.getFilterKeys=function(){return[this.options.get("optionKey")]},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},,,,,,function(t,e,o){"use strict";var n,r;Object.defineProperty(e,"__esModule",{value:!0}),(r=n=n||{}).remove="remove",r.virtual="virtual",r.published="published",e.default=n},,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,o){for(var n in e){if(e.hasOwnProperty(n)!==o.hasOwnProperty(n))return!1;var r=typeof e[n];if("object"==r){if(!t(e[n],o[n]))return!1}else if("function"==r){if(void 0===o[n]||e[n].toString()!=o[n].toString())return!1}else if(e[n]!=o[n])return!1}for(var n in o)if(void 0===e[n])return!1;return!0}},function(t,e,o){"use strict";var n,r;Object.defineProperty(e,"__esModule",{value:!0}),(r=n=n||{})[r.Launched=0]="Launched",r[r.Active=1]="Active",r[r.Inactive=2]="Inactive",r[r.Destroyed=3]="Destroyed",r[r.None=4]="None",e.default=n},,,,,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var o="";;){var n=t.getParentEntity();if(!t.rootSelector){if(n){t=n;continue}break}if(o=0==o.length?t.rootSelector:t.rootSelector+" "+o,!n)break;t=n}return e&&(0==o.length?o=e:o+=" "+e),o}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function n(){}e.default=n},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,o){return Object.getPrototypeOf(t)===Object.getPrototypeOf(o)&&(void 0!==t.length&&t.length===o.length&&Array.prototype.every.call(t,function(t,e){return t===o[e]}))}},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(99),l=(i=a.default,r(s,i),Object.defineProperty(s.prototype,"prototypes",{get:function(){return{projection:this.app.objectContainer.get("Editor/Projection/Prototypes"),panelLayout:this.app.objectContainer.get("Editor/PanelLayout/Prototypes"),panel:this.app.objectContainer.get("Editor/Panel/Prototypes"),component:this.app.objectContainer.get("Editor/Component/Prototypes"),control:this.app.objectContainer.get("Editor/Control/Prototypes"),controlSource:this.app.objectContainer.get("Editor/Control/Source/Prototypes")}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"register",{get:function(){return{panelStructures:this.app.objectContainer.get("Editor/Panel/Structures"),components:this.app.objectContainer.get("Editor/Components"),entityTypes:this.app.objectContainer.get("Entity/Register"),componentPresets:this.app.objectContainer.get("Editor/Component/Presets"),controlRulesOperations:this.app.objectContainer.get("Editor/Control/RulesOperation")}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"builders",{get:function(){return{control:this.app.componentRegister.get("Editor/Builder/Control"),panel:this.app.componentRegister.get("Editor/Builder/Panel"),panelLayout:this.app.componentRegister.get("Editor/Builder/PanelLayout"),projection:this.app.componentRegister.get("Editor/Builder/Projection"),component:this.app.componentRegister.get("Editor/Builder/Component")}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"projectEditorComponent",{get:function(){return this.app.objectContainer.get("Editor/ProjectComponent")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"projectEntity",{get:function(){return this.app.objectContainer.get("Editor/ProjectEntity")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"componentBuilder",{get:function(){return this.app.objectContainer.get("ComponentBuilder")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"entityCollector",{get:function(){return this.app.componentRegister.get("Entity/Collector")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"editorPackage",{get:function(){return this.app.packageRegister.get("Editor/Package")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"localizedMessages",{get:function(){return this.app.objectContainer.get("Messages")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"panelManager",{get:function(){return this.app.componentRegister.get("Editor/PanelManager")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"projectionManager",{get:function(){return this.app.componentRegister.get("Editor/ProjectionManager")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"templateLoader",{get:function(){return this.app.componentRegister.get("TemplateLoader")},enumerable:!0,configurable:!0}),s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],o=0;return e?e.call(t):{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(68);e.default=function(s){return r(t,p=s),Object.defineProperty(t.prototype,"controlLoader",{get:function(){return this.app.componentRegister.get("Editor/Control/ControlLoader")},enumerable:!0,configurable:!0}),t.prototype.initialProperties=function(){p.prototype.initialProperties.call(this),this.panel.status!=i.default.None&&this.initializeReloadRules()},t.prototype.checkDisplayRules=function(){p.prototype.checkDisplayRules.call(this),this.needReloadControl&&this.isActiveControl&&(this.controlLoader.reloadControl(this),this.needReloadControl=!1)},t.prototype.onPanelStatusChanged=function(t){p.prototype.onPanelStatusChanged.call(this,t),t.status==i.default.Launched&&this.initializeReloadRules()},t.prototype.initializeReloadRules=function(){var e,t,o=this,n=this.controlStructure;if(n.reloadAfterInit&&(this.checkRules(this.controlStructure.displayRules)?this.controlLoader.reloadControl(this,function(){o.restoreOptionValue()}):this.needReloadControl=!0),n.optionsDepends)try{for(var r=c(n.optionsDepends.values()),i=r.next();!i.done;i=r.next()){var a=i.value,l=this.getControlByOptionKey(a);l&&this.eventManager.addSystemHandler(l.valueChangedEvent,function(){o.checkRules(o.controlStructure.displayRules)?(o.controlLoader.reloadControl(o,function(){"afterReloadDependentOption"in o?o.afterReloadDependentOption():o.optionValue=o.getEmptyValue()}),o.needReloadControl=!1):o.needReloadControl=!0})}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}"initializeReloadRules"in s.prototype&&p.prototype.initializeReloadRules.call(this)},t;function t(){var t=null!==p&&p.apply(this,arguments)||this;return t.needReloadControl=!1,t}var p}},,,,,,,,,,,,,,,,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(8),r=(Object.defineProperty(i.prototype,"bodyElement",{get:function(){return n.default(document.body)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"windowElement",{get:function(){return n.default(window)},enumerable:!0,configurable:!0}),i.prototype.initialization=function(){},i);function i(){this.objectContainer=new Map,this.componentRegister=new Map,this.packageRegister=new Map}e.default=r},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o(1),n=(r.prototype.buildByClass=function(t,e,o){var n=this.createPackageByClass(t,e,o);return this.build(n,e,o)},r.prototype.build=function(t,e,o){return t.app=e,t.parentPackage=o,this.createInteraction(t,e,o),this.afterInteractionBuilding(t,e),this.packageInitialProperties(t),this.packageAttachEvents(t),t.collectAfter.trigger(t),t},r.prototype.packageAttachEvents=function(t){var e=this;t.componentList.forEach(function(t){t.attachEvents(t.eventManager)}),t.subpackageList.forEach(function(t){e.packageAttachEvents(t)})},r.prototype.packageInitialProperties=function(t){var e=this;t.initialProperties(),t.componentList.forEach(function(t){t.initialProperties()}),t.subpackageList.forEach(function(t){e.packageInitialProperties(t)})},r.prototype.createInteraction=function(o,n,t){var r=this,e=o.getInitialSubpackages(),i=o.getInitialComponents();i&&i.forEach(function(t){(t.package=o).componentList.add(t)}),e&&(e.forEach(function(t){var e=null;t instanceof a.default?((e=t).app=n,e.parentPackage=o):e=r.createPackageByClass(t,o.app,o),o.subpackageList.add(e)}),o.subpackageList.forEach(function(t){r.createInteraction(t,t.app,t.parentPackage)}))},r.prototype.createPackageByClass=function(t,e,o){if(!(t.prototype instanceof a.default))throw new TypeError('Ð¡lass does not implement class "PackageAbstract"');var n=new t;return n.app=e,n.parentPackage=o,n},r.prototype.afterInteractionBuilding=function(t,e){var o=this;t.afterInteractionBuilding&&t.afterInteractionBuilding(e),t.componentList.size&&t.componentList.forEach(function(t){t.afterInteractionBuilding&&t.afterInteractionBuilding(e)}),t.subpackageList.size&&t.subpackageList.forEach(function(t){o.afterInteractionBuilding(t,e)})},r);function r(){}e.default=n},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(r.prototype.build=function(t,e){var o=new t;return e&&this.implementation(o,e),o},r.prototype.implementation=function(t,e){t.package=e,t.initialProperties(),t.attachEvents(t.eventManager)},r);function r(){}e.default=n},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=o(97),s=(i=a.default,r(p,i),p.prototype.initialProperties=function(){var t=new Map;this.app.objectContainer.set("Entity/Register",t)},p.prototype.getInitialComponents=function(){return[new l.default]},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(34),l=o(15),s=o(74),p=o(65),c=(i=a.default,r(u,i),Object.defineProperty(u.prototype,"register",{get:function(){return this.app.objectContainer.get("Entity/Register")},enumerable:!0,configurable:!0}),u.prototype.initialProperties=function(){this.app.componentRegister.set("Entity/Collector",this)},u.prototype.attachEvents=function(t){},u.prototype.collectVirtualEntityByKey=function(t){var e=null;if(!this.register.has(t))throw new Error("Entry by key '"+t+"' in register not found");var o=this.register.get(t);return(e=new s.default).status=p.default.virtual,e.entityId=this.createUniqueID(),e.parentId=0,e.entityKey=o.id,e.order=0,e.options=l.default({},o.defaultOptions),e.title=o.label,e.childEntities=[],e},u.prototype.collectEntityByStructure=function(t){var e=null;if((e=new s.default).status=p.default.published,e.entityId=t.entityId,e.parentId=t.parentId,e.entityKey=t.entityKey,e.order=Number(t.order),e.options=l.default({},t.options),e.title=t.title,e.childEntities=[],t.childEntities&&t.childEntities.hasOwnProperty("length")&&t.childEntities.length)for(var o in t.childEntities){var n=t.childEntities[o],r=this.collectEntityByStructure(n);e.childEntities.push(r)}return e},u.prototype.createUniqueID=function(){function t(){return Math.random().toString(16).slice(-4)}return"virtual-"+t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},u);function u(){return null!==i&&i.apply(this,arguments)||this}e.default=c},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(8),s=o(73),p=o(24),r=(i.prototype.addWindowHandler=function(t,e,o){this.applyElementHandler(!0,{element:n.default(window),event:t,eventSelector:null,eventHandler:e,context:o})},i.prototype.removeWindowHandler=function(t,e,o){this.applyElementHandler(!1,{element:n.default(window),event:t,eventSelector:null,eventHandler:e,context:o})},i.prototype.addSystemHandler=function(t,e,o){o=this.getContext(o),t.subscribe(e,o)},i.prototype.removeSystemHandler=function(t,e,o){o=this.getContext(o),t.unsubscribe(e,o)},i.prototype.addElementHandler=function(t,e,o,n,r){this.applyElementHandler(!0,{element:t,event:e,eventSelector:o,eventHandler:n,context:r})},i.prototype.removeElementHandler=function(t,e,o,n,r){this.applyElementHandler(!1,{element:t,event:e,eventSelector:o,eventHandler:n,context:r})},i.prototype.applyElementHandler=function(t,e){e.context=this.getContext(e.context),e.eventSelector instanceof Function&&!e.eventHandler&&(e.eventHandler=e.eventSelector,e.eventSelector=""),e.context&&(e.eventHandler=p.default(e.eventHandler,e.context)),e.element instanceof Element&&(e.element=jQuery(e.element)),t?e.eventSelector?e.element.on(e.event,e.eventSelector,e.eventHandler):e.element.on(e.event,e.eventHandler):e.eventSelector?e.element.off(e.event,e.eventSelector,e.eventHandler):e.element.off(e.event,e.eventHandler)},i.prototype.getContext=function(t){return!t&&this.component&&(t=this.component),t},i.prototype.addEntityHandler=function(t,e,o,n,r){var i="",a=o;"string"==typeof o&&n instanceof Function&&(i=o,a=n),r||!n||n instanceof Function||(r=n),(r=this.getContext(r))&&(a=p.default(a,r));var l=s.default(t,i);this.rootElement.on(e,l,a)},i.prototype.removeEntityHandler=function(t,e,o,n,r){var i="",a=o;"string"==typeof o&&n instanceof Function&&(i=o,a=n),r||!n||n instanceof Function||(r=n),(r=this.getContext(r))&&(a=p.default(a,r));var l=s.default(t,i);this.rootElement.off(e,l,a)},i.prototype.addComponentHandler=function(t,e,o,n){this.addEntityHandler(this.component,t,e,o,n)},i.prototype.removeComponentHandler=function(t,e,o,n){this.removeEntityHandler(this.component,t,e,o,n)},i.prototype.addPackageHandler=function(t,e,o,n){this.addEntityHandler(this.component.package,t,e,o,n)},i.prototype.removePackageHandler=function(t,e,o,n){this.removeEntityHandler(this.component.package,t,e,o,n)},i.prototype.addPageElementHandler=function(t,e,o,n){this.applyElementHandler(!0,{element:this.rootElement,event:t,eventSelector:e,eventHandler:o,context:n})},i.prototype.removePageElementHandler=function(t,e,o,n){this.applyElementHandler(!1,{element:this.rootElement,event:t,eventSelector:e,eventHandler:o,context:n})},i);function i(t){this.component=t,this.rootElement=n.default(document.documentElement)}e.default=r},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(34),l=(i=a.default,r(s,i),s.prototype.addElementHandler=function(t,e,o,n){this.eventManager.addElementHandler(this.componentElement,t,e,o,n)},s.prototype.removeElementHandler=function(t,e,o,n){this.eventManager.removeElementHandler(this.componentElement,t,e,o,n)},s);function s(t){var e=i.call(this)||this;return t&&(t instanceof Element&&(t=jQuery(t)),e.componentElement=t),e}e.default=l},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(24),r=(i.prototype.add=function(t,e,o){this.observers.has(t)||this.observers.set(t,[]),e=o?n.default(e,o):e,this.observers.get(t).push(e)},i.prototype.remove=function(t,e,o){this.observers.has(t)&&(e=o||n.default(e,this),this.observers.get(t).filter(function(t){return t!==e}))},i.prototype.notify=function(e,o,n){this.observers.has(e)&&this.observers.get(e).forEach(function(t){t(o,n,e)})},i);function i(){this.observers=new Map}e.default=r},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(43);e.default=function t(e,o,n){if("string"==typeof o)return t(e,o.split("."),n);if(1==o.length&&void 0!==n)return e[o[0]]=n;if(0==o.length)return r.default(e);if(!e.hasOwnProperty(o[0])){if(void 0===n)return;e[o[0]]={}}return t(e[o[0]],o.slice(1),n)}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=[];for(var o in t)t.hasOwnProperty(o)&&e.push(t[o]);return e}},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),l=(i=a.default,r(s,i),Object.defineProperty(s.prototype,"panel",{get:function(){return this.control.panel},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"optionKey",{get:function(){return this.control.optionKey},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"optionValue",{get:function(){return this.control.optionValue},enumerable:!0,configurable:!0}),s.prototype.attachEvents=function(t){},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(265),l=(i=a.default,r(s,i),Object.defineProperty(s.prototype,"prototypes",{get:function(){return{projection:this.app.objectContainer.get("Editor/Projection/Prototypes"),panelLayout:this.app.objectContainer.get("Editor/PanelLayout/Prototypes"),panel:this.app.objectContainer.get("Editor/Panel/Prototypes"),component:this.app.objectContainer.get("Editor/Component/Prototypes"),control:this.app.objectContainer.get("Editor/Control/Prototypes"),controlSource:this.app.objectContainer.get("Editor/Control/Source/Prototypes")}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"register",{get:function(){return{panelStructures:this.app.objectContainer.get("Editor/Panel/Structures"),components:this.app.objectContainer.get("Editor/Components"),entityTypes:this.app.objectContainer.get("Entity/Register"),componentPresets:this.app.objectContainer.get("Editor/Component/Presets"),controlRulesOperations:this.app.objectContainer.get("Editor/Control/RulesOperation")}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"builders",{get:function(){return{control:this.app.componentRegister.get("Editor/Builder/Control"),panel:this.app.componentRegister.get("Editor/Builder/Panel"),panelLayout:this.app.componentRegister.get("Editor/Builder/PanelLayout"),projection:this.app.componentRegister.get("Editor/Builder/Projection"),component:this.app.componentRegister.get("Editor/Builder/Component")}},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"projectEditorComponent",{get:function(){return this.app.objectContainer.get("Editor/ProjectComponent")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"projectEntity",{get:function(){return this.app.objectContainer.get("Editor/ProjectEntity")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"componentBuilder",{get:function(){return this.app.objectContainer.get("ComponentBuilder")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"entityCollector",{get:function(){return this.app.componentRegister.get("Entity/Collector")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"editorPackage",{get:function(){return this.app.packageRegister.get("Editor/Package")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"localizedMessages",{get:function(){return this.app.objectContainer.get("Messages")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"panelManager",{get:function(){return this.app.componentRegister.get("Editor/PanelManager")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"projectionManager",{get:function(){return this.app.componentRegister.get("Editor/ProjectionManager")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"templateLoader",{get:function(){return this.app.componentRegister.get("TemplateLoader")},enumerable:!0,configurable:!0}),s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(8);e.default=function(t,e){n.default("html,body").animate({scrollTop:t},e)}},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),l=o(16),s=o(42),p=(i=a.default,r(c,i),Object.defineProperty(c.prototype,"entityId",{get:function(){return this.entity.entityId},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"entityKey",{get:function(){return this.entity.entityKey},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"entityTitle",{get:function(){return this.entity.title},set:function(t){var e=this.entity.title;this.entity.title=t,this.titleChangedEvent.trigger({title:t,oldTitle:e,entity:this.entity,editorComponent:this})},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"entityParentId",{get:function(){return this.entity.parentId},set:function(t){var e=this.entity.parentId;this.entity.parentId=t,this.parentChangedEvent.trigger({parent:t,oldParent:e,entity:this.entity,editorComponent:this})},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"entityStatus",{get:function(){return this.entity.status},set:function(t){var e=this.entity.status;this.entity.status=t,this.statusChangedEvent.trigger({status:t,oldStatus:e,entity:this.entity,editorComponent:this})},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"entityOrder",{get:function(){return this.entity.order},set:function(t){var e=this.entity.order;this.entity.order=t,this.orderChangedEvent.trigger({order:t,oldOrder:e,entity:this.entity,editorComponent:this})},enumerable:!0,configurable:!0}),c.prototype.initialProperties=function(){this.options.container=this.entity.options},c.prototype.attachEvents=function(t){t.addSystemHandler(this.parentChangedEvent,this.moveEntityWhenParentChange)},c.prototype.moveEntityWhenParentChange=function(t){var e=this;if(this.register.components.has(t.oldParent)&&this.register.components.has(t.parent)){var o=this.register.components.get(t.oldParent).entity,n=this.register.components.get(t.parent).entity;o.childEntities=o.childEntities.filter(function(t){return t.entityId!=e.entityId}),n.childEntities.push(this.entity)}},c);function c(){var t=i.call(this)||this;return t.options=new s.default,t.titleChangedEvent=new l.default,t.parentChangedEvent=new l.default,t.statusChangedEvent=new l.default,t.orderChangedEvent=new l.default,t}e.default=p},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(106),l=(i=a.default,r(s,i),s);function s(){var t=null!==i&&i.apply(this,arguments)||this;return t.panels=new Set,t.projection=null,t}e.default=l},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(76),l=o(16),s=(i=a.default,r(p,i),Object.defineProperty(p.prototype,"isControlsSaved",{get:function(){return this.isControlsSavedProp},set:function(t){this.isControlsSavedProp!=(this.isControlsSavedProp=t)&&this.isControlsSavedChangedEvent.trigger({panelLayout:this,value:t})},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"controlBuilder",{get:function(){return this.app.componentRegister.get("Editor/Control/Builder")},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"panelAutoSave",{get:function(){return this.panelStructure.panelAutoSave},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"panelId",{get:function(){return this.panelStructure.panelId},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"panelTitle",{get:function(){return this.panelStructure.panelTitle},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"controlElements",{get:function(){return this.componentElement.find(".control[data-control-type]")},enumerable:!0,configurable:!0}),p.prototype.createControl=function(t){var e=this.builders.control.createControl(t,this),o=this.getControlElement(t.controlKey,t.optionKey);if(!o.length)throw new Error("Element for option '"+t.optionKey+"' not found");return e.componentElement=o,this.componentBuilder.implementation(e.controlSource,this.package),this.componentBuilder.implementation(e,this.package),this.eventManager.addSystemHandler(e.valueChangedEvent,this.onControlValueChanged),this.controls.set(e.optionKey,e),e},p.prototype.getControlElement=function(t,e){return this.controlElements.filter('[data-control-type="'+t+'"][data-option-key="'+e+'"]')},p.prototype.onControlValueChanged=function(t){this.panelAutoSave?(t.control.controlSource.saveValue(),this.isControlsSaved=!0):this.isControlsSaved=!1},p.prototype.attachEvents=function(t){},p);function p(){var t=i.call(this)||this;return t.isControlsSavedProp=!0,t.controls=new Map,t.isControlsSavedChangedEvent=new l.default,t}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(37),l=(i=a.default,r(s,i),s.prototype.attachEvents=function(t){i.prototype.attachEvents.call(this,t),t.addPageElementHandler("change",".control-element",this.updateValueFromElement)},s.prototype.getEmptyValue=function(){return[]},s.prototype.setElementValue=function(t){this.controlElement.filter(":checked").prop("checked",!1),"string"==typeof t&&this.controlElement.filter('[value="'+t+'"]').prop("checked",!0)},s.prototype.getElementValue=function(){var t=this.controlElement.filter(":checked");if(t.length)return t.val()},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o(74);e.default=function t(e,o){if(o.entityId==e)return o;var n=null,r=[];for(var i in o.childEntities)if((a=o.childEntities[i]).childEntities.length&&r.push(a),a.entityId==e){n=a;break}if(null==n)for(var i in r){var a,l=t(e,a=r[i]);if(l instanceof s.default){n=l;break}}return n}},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],o=0;return e?e.call(t):{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var a,l=o(76),s=o(16),p=o(24),c=o(42),u=o(68),f=(a=l.default,r(d,a),Object.defineProperty(d.prototype,"options",{get:function(){return this.optionsRepository},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"status",{get:function(){return this.statusProp},set:function(t){var e=this.statusProp;e!=(this.statusProp=t)&&this.statusChangedEvent.trigger({panel:this,oldStatus:e,status:this.statusProp})},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"isControlsSaved",{get:function(){return this.panelLayout.isControlsSaved},set:function(t){this.panelLayout.isControlsSaved=t},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"formElement",{get:function(){return this.componentElement.find("form.panel-form")},enumerable:!0,configurable:!0}),d.prototype.initialProperties=function(){this.optionsRepository=this.createOptionsRepository()},d.prototype.createOptionsRepository=function(){return new c.default(this.optionsContainer)},d.prototype.attachEvents=function(t){t.addSystemHandler(this.statusChangedEvent,this.onStatusChanged),this.panelLayout.panelAutoSave||(t.addSystemHandler(this.panelLayout.isControlsSavedChangedEvent,this.onIsControlsSavedChanged),this.addElementHandler("click",".panel-navigation .reset-panel-button",this.resetValuesOfControls),this.addElementHandler("click",".panel-navigation .apply-panel-button",this.saveValuesOfControls)),t.addElementHandler(this.formElement,"submit",this.onFormSubmit)},d.prototype.onFormSubmit=function(t){t.preventDefault()},d.prototype.onStatusChanged=function(t){var e=new Map([[u.default.Active,"onActive"],[u.default.Inactive,"onInactive"],[u.default.Launched,"onLaunched"],[u.default.Destroyed,"onDestroyed"]]);if(e.has(t.status)&&e.get(t.status)in t.panel){var o=t.panel[e.get(t.status)];(o=p.default(o,this))()}},d.prototype.onIsControlsSavedChanged=function(){var t=this.componentElement.find(".panel-navigation .reset-panel-button"),e=this.componentElement.find(".panel-navigation .apply-panel-button");this.panelLayout.isControlsSaved?(t.addClass("disabled"),e.addClass("disabled")):(t.removeClass("disabled"),e.removeClass("disabled"))},d.prototype.saveValuesOfControls=function(){var e,t;if(!this.panelLayout.isControlsSaved){try{for(var o=i(this.panelLayout.controls.values()),n=o.next();!n.done;n=o.next())n.value.saveOptionValue()}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}this.panelLayout.isControlsSaved=!0}},d.prototype.resetValuesOfControls=function(){var e,t;if(!this.panelLayout.isControlsSaved){try{for(var o=i(this.panelLayout.controls.values()),n=o.next();!n.done;n=o.next())n.value.restoreOptionValue()}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}this.panelLayout.isControlsSaved=!0}},d.prototype.getTemplateContext=function(t){return{}},d);function d(){var t=a.call(this)||this;return t.optionsContainer={},t.statusProp=u.default.None,t.statusChangedEvent=new s.default,t}e.default=f},function(t,e,o){"use strict";var n,r;Object.defineProperty(e,"__esModule",{value:!0}),(r=n=n||{})[r.inside=0]="inside",r[r.outside=1]="outside",r[r.same=2]="same",e.default=n},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(76),l=o(16),s=(i=a.default,r(p,i),p.prototype.attachEvents=function(t){},p.prototype.initialProjection=function(){},Object.defineProperty(p.prototype,"entity",{get:function(){return this.editorComponent.entity},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"entityOptions",{get:function(){return this.editorComponent.options},enumerable:!0,configurable:!0}),p.prototype.getTemplateContext=function(){return{}},p);function p(){var t=i.call(this)||this;return t.moveProjectionEvent=new l.default,t}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(106),l=(i=a.default,r(s,i),s);function s(){var t=null!==i&&i.apply(this,arguments)||this;return t.panels=new Set,t.projection=null,t}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(305),l=(i=a.default,r(s,i),s.prototype.attachEvents=function(t){i.prototype.attachEvents.call(this,t),this.addElementHandler("click",".actions-wrapper.entity-id-"+this.editorComponent.entityId+" .remove-action",this.onRemoveClick),this.addElementHandler("click",".actions-wrapper.entity-id-"+this.editorComponent.entityId+" .edit-action",this.onEditClick)},s.prototype.onRemoveClick=function(t){this.projectionManager.removeProjection(this.editorComponent,!0)},s.prototype.onEditClick=function(t){this.panelManager.openPanel(this.editorComponent.entityKey,{},this.editorComponent.entityId)},s.prototype.getTemplateContext=function(){return{entity:this.entity}},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=new(o(228).default);n.initialization(),window.wcpfAdminApp=n},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(93),l=o(94),s=o(95),p=o(96),c=o(229),u=o(231),f=o(271),d=o(273),h=o(278),y=o(300),v=(i=a.default,r(m,i),m.prototype.initialization=function(){var t=new l.default,e=new s.default;this.objectContainer.set("ComponentBuilder",e),t.build(new c.default,this),t.build(new p.default,this),t.build(new u.default,this),t.build(new f.default,this),t.build(new d.default,this),t.build(new h.default,this),t.build(new y.default,this)},m);function m(){return null!==i&&i.apply(this,arguments)||this}e.default=v},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=o(230),s=(i=a.default,r(p,i),p.prototype.getInitialComponents=function(){return[new l.default]},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(34),l=(i=a.default,r(s,i),s.prototype.initialProperties=function(){this.options={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"},this.app.componentRegister.set("TemplateLoader",this)},s.prototype.attachEvents=function(t){},s.prototype.loadTemplate=function(t,e){return null==e&&(e={}),window._.template(t,this.options)(e)},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=o(16),s=o(232),p=o(233),c=o(234),u=o(237),f=o(238),d=o(254),h=o(260),y=o(264),v=o(268),m=o(269),_=(i=a.default,r(g,i),g.prototype.initialProperties=function(){this.app.packageRegister.set("Editor/Package",this),this.app.objectContainer.set("Editor/ProjectEntity",null),this.app.objectContainer.set("Editor/ProjectComponent",null),this.app.objectContainer.set("Editor/Components",new Map)},g.prototype.getInitialSubpackages=function(){return[new s.default,new p.default,new c.default,new u.default,new f.default,new d.default,new h.default]},g.prototype.getInitialComponents=function(){return[new y.default,new m.default,new v.default]},g);function g(){var t=null!==i&&i.apply(this,arguments)||this;return t.initEditorEvent=new l.default,t.projectLoadedEvent=new l.default,t}e.default=_},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=(i=a.default,r(s,i),s.prototype.initialProperties=function(){this.app.objectContainer.set("Editor/Component/Prototypes",new Map)},s.prototype.getInitialComponents=function(){return[]},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=(i=a.default,r(s,i),s.prototype.initialProperties=function(){this.app.objectContainer.set("Editor/Panel/Prototypes",new Map)},s.prototype.getInitialComponents=function(){return[]},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=o(235),s=o(236),p=(i=a.default,r(c,i),c.prototype.initialProperties=function(){this.app.objectContainer.set("Editor/PanelLayout/Prototypes",new Map([["Tabs",l.default],["List",s.default]])),this.app.objectContainer.set("Editor/Panel/Structures",new Map)},c.prototype.getInitialComponents=function(){return[]},c);function c(){return null!==i&&i.apply(this,arguments)||this}e.default=p},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),f=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],o=0;return e?e.call(t):{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(136),d=o(8),l=o(55),s=(i=a.default,r(p,i),p.prototype.attachEvents=function(t){i.prototype.attachEvents.call(this,t),t.addElementHandler(this.componentElement,"click",".tabs-heading-wrapper .tab-heading:not(.active-tab)",this.onTabClick),"validate"in this.panel&&this.panel.hasOwnProperty("validateEvent")&&t.addSystemHandler(this.panel.validateEvent,this.onValidatePanel)},p.prototype.onValidatePanel=function(){var u=this;this.componentElement.find(".tab-content").each(function(t,e){var o,n,r=d.default(e),i=r.data("tab-id"),a=u.componentElement.find('.tab-heading[data-tab-id="'+i+'"]'),l=!1;try{for(var s=f(r.find(".error:not(.control-element)")),p=s.next();!p.done;p=s.next()){var c=p.value;if(d.default(c).html().length){l=!0;break}}}catch(t){o={error:t}}finally{try{p&&!p.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}l?a.addClass("exists-errors"):a.removeClass("exists-errors")})},p.prototype.onTabClick=function(t){var e=l.default(t),o=e.data("tab-id");this.componentElement.find(".tab-heading.active-tab,.tab-content.active-tab").removeClass("active-tab"),e.addClass("active-tab"),this.componentElement.find('.tab-content[data-tab-id="'+o+'"]').addClass("active-tab")},p.prototype.assembleControls=function(t){var e=t.tabs;for(var o in e){var n=e[o];if(n.length)for(var r in n){var i=n[r];this.createControl(i)}}},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],o=0;return e?e.call(t):{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(136),s=(i=a.default,r(p,i),p.prototype.assembleControls=function(t){var e,o,n=t.controls;try{for(var r=l(n),i=r.next();!i.done;i=r.next()){var a=i.value;this.createControl(a)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(e)throw e.error}}},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=(i=a.default,r(s,i),s.prototype.initialProperties=function(){this.app.objectContainer.set("Editor/Projection/Prototypes",new Map)},s.prototype.getInitialComponents=function(){return[]},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=o(239),s=o(240),p=o(137),c=o(241),u=o(242),f=o(243),d=o(244),h=o(245),y=o(246),v=o(247),m=o(248),_=o(249),g=o(250),b=o(251),O=o(252),P=o(253),E=(i=a.default,r(j,i),j.prototype.initialProperties=function(){this.app.objectContainer.set("Editor/Control/Prototypes",new Map([["Select",l.default],["Text",s.default],["RadioList",p.default],["TextSize",c.default],["Switch",u.default],["CheckList",f.default],["Repeater",d.default],["ColorPicker",h.default],["Image",y.default],["ColorList",v.default],["RulesBuilder",m.default]])),this.app.objectContainer.set("Editor/Control/Source/Prototypes",new Map([["options",_.default],["entity",g.default],["container",b.default]])),this.app.objectContainer.set("Editor/Control/RulesOperation",new Map)},j.prototype.getInitialComponents=function(){return[new O.default,new P.default]},j);function j(){return null!==i&&i.apply(this,arguments)||this}e.default=E},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;0<=l;l--)(r=t[l])&&(a=(i<3?r(a):3<i?r(e,o,a):r(e,o))||a);return 3<i&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(e,"__esModule",{value:!0});var a,l=o(77),s=o(37),p=(a=s.default,r(c,a),c.prototype.attachEvents=function(t){a.prototype.attachEvents.call(this,t),t.addElementHandler(this.componentElement,"change",".control-element",this.updateValueFromElement)},c.prototype.getEmptyValue=function(){return""},c.prototype.setElementValue=function(t){"string"!=typeof t&&(t=""),this.controlElement.val(t)},c.prototype.getElementValue=function(){return this.controlElement.val()},c.prototype.reloadControl=function(t){var e=t.controlElement.find(".control-element");this.controlElement.html(e.html())},c=i([l.default],c));function c(){return null!==a&&a.apply(this,arguments)||this}e.default=p},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(37),l=(i=a.default,r(s,i),s.prototype.attachEvents=function(t){i.prototype.attachEvents.call(this,t),t.addElementHandler(this.controlElement,"change paste keyup",this.updateValueFromElement)},s.prototype.getEmptyValue=function(){return""},s.prototype.setElementValue=function(t){"string"!=typeof t&&(t=""),this.controlElement.val(t)},s.prototype.getElementValue=function(){return this.controlElement.val()},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(37),l=(i=a.default,r(s,i),Object.defineProperty(s.prototype,"unitSelectElement",{get:function(){return this.componentElement.find(".select-unit")},enumerable:!0,configurable:!0}),s.prototype.attachEvents=function(t){i.prototype.attachEvents.call(this,t),t.addElementHandler(this.controlElement,"change paste keyup",this.updateValueFromElement),t.addElementHandler(this.unitSelectElement,"change",this.updateValueFromElement)},s.prototype.updateValueFromElement=function(){var t=this.controlElement.val();t=t.replace(/[^0-9\.]/g,""),this.controlElement.val(t),i.prototype.updateValueFromElement.call(this)},s.prototype.setElementValue=function(t){if("number"==typeof t&&(t+=""),"string"==typeof t&&t.length){var e=this.parseUnit(t);"string"!=typeof e[0]&&"number"!=typeof e[0]||isNaN(e[0])||this.controlElement.val(e[0]),this.unitSelectElement.val(e[1])}else this.controlElement.val(""),this.unitSelectElement.val("")},s.prototype.getElementValue=function(){var t=this.controlElement.val(),e=this.unitSelectElement.val();return t.length&&(t=parseFloat(t)),t+e},s.prototype.parseUnit=function(t){return"string"!=typeof t?[0,""]:[parseFloat(t),t.match(/[\d.\-\+]*\s*(.*)/)[1]||""]},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(37),l=(i=a.default,r(s,i),Object.defineProperty(s.prototype,"firstOption",{get:function(){return this.controlStructure.firstOption},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"secondOption",{get:function(){return this.controlStructure.secondOption},enumerable:!0,configurable:!0}),s.prototype.attachEvents=function(t){i.prototype.attachEvents.call(this,t),t.addElementHandler(this.controlElement,"change",this.updateValueFromElement)},s.prototype.setElementValue=function(t){t==this.firstOption.value?this.controlElement.prop("checked",!0):this.controlElement.prop("checked",!1)},s.prototype.getElementValue=function(){return this.controlElement.prop("checked")?this.firstOption.value:this.secondOption.value},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;0<=l;l--)(r=t[l])&&(a=(i<3?r(a):3<i?r(e,o,a):r(e,o))||a);return 3<i&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],o=0;return e?e.call(t):{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var l,s=o(37),p=o(77),c=o(8),u=o(102),f=(l=s.default,r(d,l),d.prototype.attachEvents=function(t){l.prototype.attachEvents.call(this,t),t.addElementHandler(this.componentElement,"change",".control-element",this.updateValueFromElement)},d.prototype.getEmptyValue=function(){return[]},d.prototype.setElementValue=function(t){var e,o;if(null==t||null==t?t=[]:"string"==typeof t?t=[t]:Array.isArray(t)||"object"!=typeof t||(t=u.default(t)),this.controlElement.filter(":checked").prop("checked",!1),Array.isArray(t))try{for(var n=a(t.values()),r=n.next();!r.done;r=n.next()){var i=r.value;this.controlElement.filter('[value="'+i+'"]').prop("checked",!0)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(e)throw e.error}}},d.prototype.getElementValue=function(){var n=[];return this.controlElement.filter(":checked").map(function(t,e){var o=c.default(e);n.push(o.val())}),n},d.prototype.reloadControl=function(t){var e=t.controlElement.find(".check-box-list");this.componentElement.find(".check-box-list").html(e.html())},d=i([p.default],d));function d(){return null!==l&&l.apply(this,arguments)||this}e.default=f},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;0<=l;l--)(r=t[l])&&(a=(i<3?r(a):3<i?r(e,o,a):r(e,o))||a);return 3<i&&a&&Object.defineProperty(e,o,a),a},m=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],o=0;return e?e.call(t):{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}}},_=this&&this.__read||function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(n=i.next()).done;)a.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a};Object.defineProperty(e,"__esModule",{value:!0});var a,l=o(56),s=o(77),y=o(68),d=o(137),v=o(8),f=o(102),p=o(43),c=o(75),u=(a=l.default,r(h,a),Object.defineProperty(h.prototype,"controlLoader",{get:function(){return this.app.componentRegister.get("Editor/Control/ControlLoader")},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"itemsElement",{get:function(){return this.listElement.find("> .repeater-item")},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"listElement",{get:function(){return this.componentElement.find(".repeater-list:first")},enumerable:!0,configurable:!0}),h.prototype.initialProperties=function(){var o=this;a.prototype.initialProperties.call(this),this.listElement.sortable({items:"> .repeater-item",handle:".sorting-repeater-item-handle",update:function(t,e){o.onItemMove()}})},h.prototype.restoreOptionValue=function(){var t=this.controlSource.getValue();"object"!=typeof t&&(t=[]),this.optionValueProp=t,this.changeValue(t)},h.prototype.initializeReloadRules=function(){var e,t,o=this.controlStructure.itemOptionsDepends,n=[];if(Object.keys(o).length)for(var r in o){var i=o[r];try{for(var a=m(i.values()),l=a.next();!l.done;l=a.next()){var s=l.value;if(-1===n.indexOf(s)){n.push(s);var p=this.getControlByOptionKey(s);p&&this.eventManager.addSystemHandler(p.valueChangedEvent,this.onItemDependChange)}}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}}},h.prototype.attachEvents=function(t){a.prototype.attachEvents.call(this,t),this.panel.hasOwnProperty("afterInitValidationEvent")&&t.addSystemHandler(this.panel.afterInitValidationEvent,this.addRulesToRepeaterItems),t.addElementHandler(this.componentElement,"click",".repeater-bottom-navigation .add-item",this.onAddItemClick),t.addElementHandler(this.componentElement,"click",'.navigation-repeater-item[data-repeater-key="'+this.optionKey+'"] .add-empty-item',this.onAddBeforeItemClick),t.addElementHandler(this.componentElement,"click",'.navigation-repeater-item[data-repeater-key="'+this.optionKey+'"] .remove-item',this.onRemoveItemClick),t.addSystemHandler(this.valueChangedEvent,this.onValueChangedEvent)},h.prototype.onItemMove=function(){var r=this,i=[],a=[];this.itemsElement.each(function(t,e){var o=v.default(e),n=o.attr("data-index");o.hasClass("ui-sortable-placeholder")||(i.push(r.optionValue[n]),a.push(r.childControls[n]))}),this.childControls=a,this.optionValue=p.default(i)},h.prototype.onValueChangedEvent=function(t){this.changeValue(t.value)},h.prototype.onRemoveItemClick=function(t){var e=v.default(t.currentTarget).parents(".repeater-item:first"),o=parseInt(e.attr("data-index")),n=p.default(this.optionValue);e.remove(),this.optionValue.splice(o,1),this.childControls.splice(o,1),this.refreshIndexes(),this.changeEventWithoutProcessing({oldValue:n,newValue:this.optionValue})},h.prototype.onAddBeforeItemClick=function(t){var e=v.default(t.currentTarget).parents(".repeater-item:first"),o=parseInt(e.attr("data-index")),n=p.default(this.optionValue);this.optionValue.splice(o,0,{}),this.childControls.splice(o,0,{}),this.createItem(o,{refreshIndexes:!0}),this.changeEventWithoutProcessing({oldValue:n,newValue:this.optionValue})},h.prototype.onAddItemClick=function(t){this.createItem(-1)},h.prototype.changeValue=function(t){var e,o;if(null==t||null==t?t=[]:Array.isArray(t)||"object"!=typeof t||(t=f.default(t),this.optionValueProp=t),Array.isArray(t)){if(t.length<this.childControls.length){for(var n=t.length;n<this.childControls.length;n++){var r=Object.keys(this.childControls[n])[0];this.childControls[n][r].componentElement.parents(".repeater-item:first").remove()}this.childControls.splice(t.length)}this.refreshIndexes();try{for(var i=m(t.entries()),a=i.next();!a.done;a=i.next()){var l=_(a.value,2),s=l[0],p=l[1];if(this.childControls.length-1>=s)for(var c in this.childControls[s]){var u=this.childControls[s][c];p.hasOwnProperty(c)?u.optionValue=p[c]:u.controlStructure.defaultValue?u.optionValue=u.controlStructure.defaultValue:u.optionValue=u.getEmptyValue()}else this.createItem(s,{reloadAfterInit:!1})}}catch(t){e={error:t}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(e)throw e.error}}this.reloadControlsQueue.length&&(this.controlLoader.reloadControls(this.reloadControlsQueue,function(t){var e,o;try{for(var n=m(t),r=n.next();!r.done;r=n.next())r.value.restoreOptionValue()}catch(t){e={error:t}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(e)throw e.error}}}),this.reloadControlsQueue=[])}},h.prototype.refreshIndexes=function(){var e,t;try{for(var o=m(this.optionValue.entries()),n=o.next();!n.done;n=o.next()){var r=_(n.value,2),i=r[0],a=(r[1],this.itemsElement.eq(i));for(var l in a.attr("data-index",i),a.find('.sorting-repeater-item-handle[data-repeater-key="'+this.optionKey+'"] .index').html(i+1+""),this.childControls[i]){var s=this.childControls[i][l],p=s.optionKey,c=this.optionKey+"."+i+"."+l;s.componentElement.attr("data-option-key",c),s.controlStructure.optionKey=c,s.controlSource.optionKey=i+"."+l,s.componentElement.find('[name="'+p+'"]').attr("name",c),s instanceof d.default&&s.setElementValue(s.optionValue)}}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}var u=this.panel.formElement.data("validator");if(u&&Object.keys(u.invalid).length)for(var f in u.invalid)this.panel.formElement.find('[id="'+f+'-error"]').remove()},h.prototype.reloadControl=function(t){var e=this.controlStructure.resetValueOnReload;e&&(this.optionValue=[]);var o=t.controlElement.find("> .control-content > .repeater-item-template");this.componentElement.find("> .control-content > .repeater-item-template").html(o.html()),e||this.changeValue(this.optionValue)},h.prototype.renderRepeaterItem=function(t){return'\n            <div class="repeater-item" data-index="'+t+'">\n                <div class="repeater-item-handle sorting-repeater-item-handle" data-repeater-key="'+this.optionKey+'">\n                    <span class="index">'+(t+1)+'</span>\n                </div>\n                <div class="repeater-item-controls"></div>\n                <div class="repeater-item-handle navigation-repeater-item" data-repeater-key="'+this.optionKey+'">\n                    <div class="add-empty-item"></div>\n                    <div class="remove-item"></div>\n                </div>\n            </div>\n        '},h.prototype.addRulesToRepeaterItems=function(){var t=this.panel.formElement.data("validator");if(t){var e=t.settings.rules,o=!1;if(e.hasOwnProperty(this.optionKey))o=e[this.optionKey];else for(var n in e)if(-1===n.indexOf("*")){var r=n.replace(/\./g,"\\.").split("*").join("([a-zA-Z\\d]+)");if(new RegExp(r).test(this.optionKey)){o=e[n];break}}if(o&&"object"==typeof o&&o.hasOwnProperty("repeaterItem")&&"object"==typeof o.repeaterItem)for(var i in this.childControls)for(var a in this.childControls[i]){var l=this.childControls[i][a];o.repeaterItem.hasOwnProperty(a)&&(e[l.optionKey]=o.repeaterItem[a])}}},h.prototype.createItem=function(t,e){e=Object.assign({reloadAfterInit:!0,refreshIndexes:!1},e),-1==t&&(t=this.childControls.length),this.childControls[t]={};var o=new Map,n=this.controlStructure.controlStructures,r=v.default(this.renderRepeaterItem(t)),i=r.find(".repeater-item-controls"),a=this.componentElement.find(".repeater-list > .repeater-item").eq(t);for(var l in t!=this.childControls.length&&a.length?a.before(r):this.componentElement.find(".repeater-list").append(r),e.refreshIndexes&&this.refreshIndexes(),n){var s=Object.assign({},n[l]),p=this.optionKey+"."+t+"."+l,c=s.optionKey;s.optionKey=p,s.controlSource="container";var u=this.builders.control.createControl(s,this.panelLayout),f=this.componentElement.find('.repeater-item-template .control[data-control-type="'+s.controlKey+'"][data-option-key="'+c+'"]');f.length&&(!e.reloadAfterInit&&s.hasOwnProperty("reloadAfterInit")&&s.reloadAfterInit&&(s.reloadAfterInit=!1,this.reloadControlsQueue.push(u)),o.set(this.optionKey+".repeaterItem."+l,u),o.set("repeaterItem."+l,u),u.contextControls=o,(f=f.clone()).attr("data-option-key",p),f.find('[name="'+c+'"]').attr("name",p),u.parentControl=this,u.componentElement=f,u.controlSource.optionsContainer=this.optionValueProp,u.controlSource.optionKey=t+"."+l,i.append(f),this.componentBuilder.implementation(u.controlSource,this.package),this.eventManager.addSystemHandler(u.valueChangedEvent,this.onChildControlValueChanged),this.childControls[t][l]=u)}for(var d in this.childControls[t]){var h=this.childControls[t][d];this.componentBuilder.implementation(h,this.package)}this.panel.status==y.default.Active&&this.addRulesToRepeaterItems()},h.prototype.onChildControlValueChanged=function(t){var e=p.default(this.optionValue),o=t.control.controlSource,n=o.optionsContainer;Array.isArray(e)||(e=f.default(this.optionValue));var r=p.default(e);o.optionsContainer=r,o.saveValue(),this.optionValueProp=r,o.optionsContainer=n,c.default(e,this.optionValue)||this.changeEventWithoutProcessing({oldValue:e,newValue:this.optionValue})},h.prototype.changeEventWithoutProcessing=function(t){this.eventManager.removeSystemHandler(this.valueChangedEvent,this.onValueChangedEvent),this.valueChangedEvent.trigger({oldValue:t.oldValue,value:t.newValue,control:this}),this.eventManager.addSystemHandler(this.valueChangedEvent,this.onValueChangedEvent)},h.prototype.onItemDependChange=function(t){var e,o,n,r,i=this.controlStructure.itemOptionsDepends,a=t.control.optionKey,l=[],s=[];if(Object.keys(i).length)for(var p in i)-1===i[p].indexOf(a)||l.push(p);try{for(var c=m(l.values()),u=c.next();!u.done;u=c.next()){var f=u.value;try{for(var d=m(this.childControls.entries()),h=d.next();!h.done;h=d.next()){var y=_(h.value,2),v=(y[0],y[1]);v.hasOwnProperty(f)&&s.push(v[f])}}catch(t){n={error:t}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(e)throw e.error}}s.length&&this.controlLoader.reloadControls(s,function(t){var e,o;try{for(var n=m(t),r=n.next();!r.done;r=n.next()){var i=r.value;i.optionValue=i.getEmptyValue()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(e)throw e.error}}})},h=i([s.default],h));function h(){var t=null!==a&&a.apply(this,arguments)||this;return t.childControls=[],t.reloadControlsQueue=[],t}e.default=u},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(37),l=(i=a.default,r(s,i),s.prototype.showControlElement=function(){this.componentElement.show()},s.prototype.hideControlElement=function(){this.componentElement.hide()},Object.defineProperty(s.prototype,"colorPickerElement",{get:function(){return this.componentElement.find(".color-picker-element")},enumerable:!0,configurable:!0}),s.prototype.initialProperties=function(){function t(){e.updateValueFromElement()}var e=this;this.colorPickerElement.wpColorPicker({hide:!0,change:t,clear:t}),i.prototype.initialProperties.call(this)},s.prototype.setElementValue=function(t){"string"!=typeof t&&(t=""),t.length?this.colorPickerElement.wpColorPicker("color",t):this.colorPickerElement.iris("color","")},s.prototype.getElementValue=function(){return this.colorPickerElement.wpColorPicker("color")},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(56),l=o(24),s=(i=a.default,r(p,i),p.prototype.initialProperties=function(){i.prototype.initialProperties.call(this),this.mediaFrame=wp.media({multiple:!1,library:{type:"image"}})},p.prototype.attachEvents=function(t){i.prototype.attachEvents.call(this,t),t.addSystemHandler(this.valueChangedEvent,this.onValueChangedEvent),t.addElementHandler(this.componentElement,"click",".upload-container .upload-image",this.onUpdateButtonClick),t.addElementHandler(this.componentElement,"click",".image-container .delete-image",this.onRemoveButtonClick),this.mediaFrame.on("select",l.default(this.onSelectImage,this))},p.prototype.onRemoveButtonClick=function(){this.optionValue=null},p.prototype.onUpdateButtonClick=function(){this.mediaFrame.open()},p.prototype.onSelectImage=function(){var t=this.mediaFrame.state().get("selection").first().toJSON();this.optionValue=t.id,this.eventManager.removeSystemHandler(this.valueChangedEvent,this.onValueChangedEvent),this.updateOptionValue({id:t.id,url:t.url}),this.eventManager.addSystemHandler(this.valueChangedEvent,this.onValueChangedEvent)},p.prototype.restoreDefaultOptionValue=function(t){i.prototype.restoreDefaultOptionValue.call(this,t),!this.isAttached&&this.optionValue&&this.updateOptionValue({id:this.optionValue})},p.prototype.onValueChangedEvent=function(t){this.updateOptionValue({id:t.value})},p.prototype.restoreOptionValue=function(){i.prototype.restoreOptionValue.call(this),this.updateOptionValue({id:this.optionValueProp})},p.prototype.updateOptionValue=function(t){var e=this,o=t.id,n=this.componentElement.find(".control-input-element"),r=this.componentElement.find(".upload-container"),i=this.componentElement.find(".image-container");if(this.attachmentQuery&&this.attachmentQuery.abort(),!o)return n.val(""),this.updatePreviewImage(""),r.removeClass("woocommerce-product-filter-hidden"),void i.addClass("woocommerce-product-filter-hidden");if(r.addClass("woocommerce-product-filter-hidden"),i.removeClass("woocommerce-product-filter-hidden"),t.hasOwnProperty("url"))this.updatePreviewImage(t.url);else{var a=wp.media.attachment(o);this.attachmentQuery=a.sync("read"),this.attachmentQuery.done(function(t){e.updatePreviewImage(t.url)}).fail(function(){e.updatePreviewImage("")})}n.val(o)},p.prototype.updatePreviewImage=function(t){this.componentElement.find(".image-element").attr("src",t)},p);function p(){var t=null!==i&&i.apply(this,arguments)||this;return t.isAttached=!1,t.attachmentQuery=null,t}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;0<=l;l--)(r=t[l])&&(a=(i<3?r(a):3<i?r(e,o,a):r(e,o))||a);return 3<i&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(e,"__esModule",{value:!0});var a,l=o(56),s=o(77),p=o(24),c=o(43),u=(a=l.default,r(f,a),Object.defineProperty(f.prototype,"controlLoader",{get:function(){return this.app.componentRegister.get("Editor/Control/ControlLoader")},enumerable:!0,configurable:!0}),f.prototype.initialProperties=function(){a.prototype.initialProperties.call(this),this.mediaFrame=wp.media({multiple:!1,library:{type:"image"}}),this.mediaFrame.on("select",p.default(this.onSelectImage,this))},f.prototype.getEmptyValue=function(){return{}},f.prototype.restoreOptionValue=function(){a.prototype.restoreOptionValue.call(this);var t=this.controlStructure.taxonomiesColors;if(Array.isArray(this.optionValue)||"object"!=typeof this.optionValue){if(!t.hasOwnProperty(this.optionKey))return void(this.optionValueProp={});this.optionValueProp=c.default(t[this.optionKey])}else if(!Array.isArray(this.optionValue)&&"object"==typeof this.optionValue&&t.hasOwnProperty(this.optionKey)){var e=c.default(t[this.optionKey]);this.optionValueProp=jQuery.extend(e,this.optionValueProp)}for(var o in this.isRestoredOption=!0,this.optionValue){var n=this.optionValue[o],r=this.componentElement.find(".color-item[data-term="+o+"]");n.image&&r.find(".image-element").attr("src")&&(this.images[n.image]=r.find(".image-element").attr("src")),this.changeMarkerStyleSwitch(n.term,n.markerStyle),this.changeTypeSwitch(n.term,n.type),this.changeBorderColorElement(n.term,n.borderColor,!0),this.changeColorElement(n.term,n.color,!0),this.changeImageElement(n.term,n.image)}this.isRestoredOption=!1},f.prototype.onSelectImage=function(){var t=this.mediaFrame.$el.data("term"),e=this.mediaFrame.state().get("selection").first().toJSON();this.images[e.id]=e.url,this.changeImageElement(t,e.id)},f.prototype.changeImageElement=function(t,e){var o=this,n=this.componentElement.find(".color-item[data-term="+t+"]").find(".image-container");if(this.attachmentQuery.hasOwnProperty(t)&&this.attachmentQuery[t]&&this.attachmentQuery[t].abort(),this.changeColorOption(t,"image",e),n.find(".image-element").attr("src",""),e&&!this.images.hasOwnProperty(e)){var r=wp.media.attachment(e);this.attachmentQuery[t]=r.sync("read"),this.attachmentQuery[t].done(function(t){o.images[e]=t.url,n.find(".image-element").attr("src",t.url)}).always(function(){o.updatePreviewColor(t)})}else e&&this.images.hasOwnProperty(e)&&n.find(".image-element").attr("src",this.images[e]);this.updatePreviewColor(t)},f.prototype.changeColorElement=function(t,e,o){void 0===o&&(o=!1);var n=this.componentElement.find(".color-item[data-term="+t+"]"),r=n.find(".color-picker-element"),i=n.find(".preview-color");o&&(r.wpColorPicker("color",e),e&&e.length||r.parents(".wp-picker-container").find(".wp-color-result").css("background-color","")),"color"==this.optionValue[t].type&&i.css("background",e),this.changeColorOption(t,"color",e)},f.prototype.changeBorderColorElement=function(t,e,o){void 0===o&&(o=!1);var n=this.componentElement.find(".color-item[data-term="+t+"]"),r=n.find(".border-picker-element"),i=n.find(".preview-color");o&&(r.wpColorPicker("color",e),e&&e.length||r.parents(".wp-picker-container").find(".wp-color-result").css("background-color","")),i.css("border-color",e),this.changeColorOption(t,"borderColor",e)},f.prototype.changeMarkerStyleSwitch=function(t,e){var o=this.componentElement.find(".color-item[data-term="+t+"]").find('.switch-element[data-name="marker"]');this.changeSwitchElement(o,e),this.changeColorOption(t,"markerStyle",e)},f.prototype.changeTypeSwitch=function(t,e){var o=this.componentElement.find(".color-item[data-term="+t+"]"),n=o.find('.switch-element[data-name="type"]');this.changeSwitchElement(n,e),"color"==e?(o.find(".image-container").hide(),o.find(".color-picker-container").show()):"image"==e&&(o.find(".image-container").show(),o.find(".color-picker-container").hide()),this.changeColorOption(t,"type",e),this.updatePreviewColor(t)},f.prototype.updatePreviewColor=function(t){var e=this.componentElement.find(".color-item[data-term="+t+"]"),o=e.find(".preview-color"),n=this.optionValue[t].image;if("color"==this.optionValue[t].type)o.css("background-image",""),o.css("background",this.optionValue[t].color);else if("image"==this.optionValue[t].type){var r=e.find(".image-container .preview-image-container"),i=e.find(".image-container .upload-container");o.css("background",""),n&&this.images.hasOwnProperty(n)?(o.css("background-image","url("+this.images[n]+")"),r.removeClass("woocommerce-product-filter-hidden"),i.addClass("woocommerce-product-filter-hidden")):(o.css("background-image",""),r.addClass("woocommerce-product-filter-hidden"),i.removeClass("woocommerce-product-filter-hidden"))}},f.prototype.changeSwitchElement=function(t,e){t.find(".option.active").removeClass("active"),t.find('.option[data-value="'+e+'"]').addClass("active")},f.prototype.reloadControl=function(t){this.componentElement.find(".control-content").html(t.controlElement.find(".control-content").html()),this.initialElementProperties(),this.attachElementEvents(this.eventManager)},f.prototype.afterReloadDependentOption=function(){this.restoreOptionValue()},f.prototype.initialElementProperties=function(){function t(n){setTimeout(function(){var t=jQuery(n.target),e=t.parents(".color-item:first"),o=t.hasClass("wp-picker-clear")?"":t.val();r.changeColorElement(e.data("term"),o)},1)}function e(n){setTimeout(function(){var t=jQuery(n.target),e=t.parents(".color-item:first"),o=t.hasClass("wp-picker-clear")?"":t.val();r.changeBorderColorElement(e.data("term"),o)},1)}var r=this;this.componentElement.find(".color-picker-element").wpColorPicker({hide:!0,palettes:!0,change:t,clear:t}),this.componentElement.find(".border-picker-element").wpColorPicker({hide:!0,palettes:!0,change:e,clear:e})},f.prototype.attachEvents=function(t){a.prototype.attachEvents.call(this,t),t.addElementHandler(this.componentElement,"click",".image-container .upload-container .upload-image",this.onUpdateImageClick),t.addElementHandler(this.componentElement,"click",".image-container .delete-image",this.onRemoveImageClick),t.addElementHandler(this.componentElement,"mouseenter",'.switch-element[data-name="marker"] .option',this.onMarkerMouseEnter),t.addElementHandler(this.componentElement,"mouseleave",'.switch-element[data-name="marker"] .option',this.onMouseLeaveEnter)},f.prototype.attachElementEvents=function(t){t.addElementHandler(this.componentElement.find(".switch-element"),"click",".option:not(.active)",this.onSwitchClick)},f.prototype.onMarkerMouseEnter=function(t){var e=jQuery(t.currentTarget);e.parents(".color-item:first").addClass("marker-preview").addClass("marker-preview-"+e.data("value"))},f.prototype.onMouseLeaveEnter=function(t){var e=jQuery(t.currentTarget);e.parents(".color-item:first").removeClass("marker-preview").removeClass("marker-preview-"+e.data("value"))},f.prototype.onRemoveImageClick=function(t){var e=jQuery(t.currentTarget).parents(".color-item:first");this.changeImageElement(e.data("term"),"")},f.prototype.onUpdateImageClick=function(t){var e=jQuery(t.currentTarget).parents(".color-item:first");this.mediaFrame.open(e),this.mediaFrame.$el.data("term",e.data("term"))},f.prototype.onSwitchClick=function(t){var e=jQuery(t.currentTarget),o=e.parents(".color-item:first"),n=e.parents(".switch-element").data("name"),r=e.data("value");"type"==n?this.changeTypeSwitch(o.data("term"),r):"marker"==n&&this.changeMarkerStyleSwitch(o.data("term"),r)},f.prototype.changeColorOption=function(t,e,o){if(this.optionValue[t][e]!=o){var n=c.default(this.optionValue);this.optionValue[t][e]=o,this.isRestoredOption||this.valueChangedEvent.trigger({oldValue:n,value:this.optionValue,control:this})}},f=i([s.default],f));function f(){var t=null!==a&&a.apply(this,arguments)||this;return t.isRestoredOption=!1,t.images={},t.attachmentQuery={},t}e.default=u},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var p,i=o(56),a=o(43),l=(p=i.default,r(s,p),s.prototype.getEmptyValue=function(){return[]},s.prototype.getGroupPosition=function(t){for(var e in this.optionValue)if(this.optionValue[e].id==t)return e;return-1},s.prototype.getRulePosition=function(t,e){var o=this.getGroupOption(t).rules;for(var n in o)if(o[n].id==e)return n;return-1},s.prototype.getGroupOption=function(t){for(var e in this.optionValue){var o=this.optionValue[e];if(o.id==t)return o}return null},s.prototype.getRuleOption=function(t,e){var o=this.getRulePosition(t,e),n=this.getGroupOption(t);return-1!==o?n.rules[o]:null},s.prototype.setRuleOption=function(t,e,o,n){var r=this.getRulePosition(t,e),i=this.getGroupOption(t);-1!==r?i.rules[r]={id:e,rule:o}:n?i.rules.splice(n,0,{id:e,rule:o}):i.rules.push({id:e,rule:o})},s.prototype.hasRuleOption=function(t,e){var o=this.getGroupOption(t).rules;for(var n in o)if(o[n].id==e)return!0;return!1},s.prototype.hasGroupOption=function(t){for(var e in this.optionValue)if(this.optionValue[e].id==t)return!0;return!1},s.prototype.deleteRuleOption=function(t,e){var o=this.getGroupOption(t),n=this.getRulePosition(t,e);-1!==n&&o.rules.splice(n,1)},s.prototype.deleteGroupOption=function(t){var e=this.getGroupPosition(t);-1!==e&&this.optionValue.splice(e,1)},s.prototype.restoreOptionValue=function(){var i=this;this.isRestoredOption=!0,p.prototype.restoreOptionValue.call(this),"object"==typeof this.optionValue&&this.optionValue&&this.hasGroupOption("group_0")&&this.hasRuleOption("group_0","rule_0")||("object"==typeof this.optionValue&&this.optionValue||(this.optionValueProp=[]),this.hasGroupOption("group_0")||this.optionValueProp.push({id:"group_0",rules:[]}),this.getGroupOption("group_0").rules.push({id:"rule_0",rule:{param:this.controlStructure.useEntries[0],operator:"==",value:null}}));var t=null;for(var e in this.optionValue){var o=this.optionValue[e],n=this.getGroupElement(o.id);if(!n.length&&o.rules)this.createEmptyGroup(o.id,t),n=this.getGroupElement(o.id);else if(n.length&&!o.rules){this.deleteGroupOption(o.id);continue}var r=null;for(var a in o.rules){var l=o.rules[a],s=this.getRuleElement(o.id,l.id);s.length||(this.createEmptyRule(o.id,l.id,r),s=this.getRuleElement(o.id,l.id)),this.setRuleOptions(o.id,l.id,l.rule),r=s}t=n}this.componentElement.find(".rule-group[data-id]").each(function(t,e){var o=jQuery(e),r=o.data("id");i.hasGroupOption(r)?o.find(".rule-row[data-id]").each(function(t,e){var o=jQuery(e),n=o.data("id");i.hasRuleOption(r,n)||o.remove()}):o.remove()}),this.initSelect2(),this.isRestoredOption=!1},s.prototype.initSelect2=function(){this.componentElement.find(".value-select").select2({width:"100%",closeOnSelect:!0})},s.prototype.setRuleOptions=function(t,e,o,n){var r=this.getRuleElement(t,e);r.find(".operator-select").val(o.operator),r.find(".param-select").val(o.param);var i=a.default(this.optionValue);this.setRuleOption(t,e,o,n),this.isRestoredOption||this.valueChangedEvent.trigger({oldValue:i,value:this.optionValue,control:this}),this.reloadEntries(t,e)},s.prototype.attachEvents=function(t){p.prototype.attachEvents.call(this,t),t.addElementHandler(this.componentElement,"change",".rule-row .param-select",this.onParamChange),t.addElementHandler(this.componentElement,"change",".rule-row .operator-select",this.onOperatorChange),t.addElementHandler(this.componentElement,"change",".rule-row .value-select",this.onEntryValueChange),t.addElementHandler(this.componentElement,"click",".rule-row .add-rule.button",this.onAddRuleButtonClick),t.addElementHandler(this.componentElement,"click",".rule-row .remove-rule.button",this.onRemoveRuleButtonClick),t.addElementHandler(this.componentElement,"click",".rule-groups .add-rule-group.button",this.onAddGroupButtonClick)},s.prototype.compileTemplate=function(t,e){return window._.template(t,{evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"})(e)},s.prototype.getRuleElement=function(t,e){return this.componentElement.find('.rule-group[data-id="'+t+'"] .rule-row[data-id="'+e+'"]')},s.prototype.getGroupElement=function(t){return this.componentElement.find('.rule-group[data-id="'+t+'"]')},s.prototype.generateUniqueId=function(){return"_"+Math.random().toString(36).substr(2,9)},s.prototype.onRemoveRuleButtonClick=function(t){var e=jQuery(t.currentTarget).parents(".rule-row:first"),o=e.data("id"),n=e.parents(".rule-group:first").data("id"),r=e.parents(".rules-table-body"),i=a.default(this.optionValue);"rule_0"==o&&"group_0"==n||(r.find(".rule-row").length<=1&&"group_0"!=n?(this.getGroupElement(n).remove(),this.deleteGroupOption(n)):(e.remove(),this.deleteRuleOption(n,o)),this.valueChangedEvent.trigger({oldValue:i,value:this.optionValue,control:this}))},s.prototype.onAddGroupButtonClick=function(t){var e=this.generateUniqueId(),o=this.compileTemplate(this.controlStructure.groupRuleTemplateHtml,{groupId:e}),n=jQuery(o),r=this.generateUniqueId();this.componentElement.find(".rule-group").length?n.insertAfter(this.componentElement.find(".rule-group:last")):this.componentElement.find(".rule-groups").prepend(n);var i={param:this.controlStructure.useEntries[0],operator:"==",value:null};this.optionValue.push({id:e,rules:[]}),this.createEmptyRule(e,r),this.setRuleOptions(e,r,i)},s.prototype.createEmptyGroup=function(t,e){var o=this.compileTemplate(this.controlStructure.groupRuleTemplateHtml,{groupId:t}),n=jQuery(o);e?n.insertAfter(e):this.componentElement.find(".rule-group").length?n.insertAfter(this.componentElement.find(".rule-group:last")):this.componentElement.find(".rule-groups").prepend(n)},s.prototype.createEmptyRule=function(t,e,o){var n=this.compileTemplate(this.controlStructure.ruleTemplateHtml,{groupId:t,ruleId:e}),r=jQuery(n);o?r.insertAfter(o):this.getGroupElement(t).find(".rules-table-body").append(r),this.initSelect2()},s.prototype.onAddRuleButtonClick=function(t){var e=jQuery(t.currentTarget),o=e.parents(".rule-row:first").data("id"),n=e.parents(".rule-group:first").data("id"),r=this.getRuleElement(n,o),i=this.generateUniqueId();this.createEmptyRule(n,i,r);var a=this.getGroupOption(n),l=this.getRulePosition(n,o),s={param:this.controlStructure.useEntries[0],operator:"==",value:null};a.rules.splice(l+1,0,{id:i,rule:s}),this.setRuleOptions(n,i,s,l+1)},s.prototype.onEntryValueChange=function(t){var e=jQuery(t.currentTarget),o=e.parents(".rule-row:first").data("id"),n=e.parents(".rule-group:first").data("id"),r=e.val();this.changeRuleOption(n,o,"value",r)},s.prototype.onOperatorChange=function(t){var e=jQuery(t.currentTarget),o=e.parents(".rule-row:first").data("id"),n=e.parents(".rule-group:first").data("id"),r=e.val();this.changeRuleOption(n,o,"operator",r)},s.prototype.onParamChange=function(t){var e=jQuery(t.currentTarget),o=e.parents(".rule-row:first").data("id"),n=e.parents(".rule-group:first").data("id"),r=e.val();this.changeRuleOption(n,o,"param",r),this.reloadEntries(n,o)},s.prototype.reloadEntries=function(t,e){var o=this,n=this.getRuleOption(t,e).rule.param,r=this.getValueElementByRule(t,e);r.data("wcpf-loaded-options",!1),r.parents("td:first").block(),s.optionsElements.hasOwnProperty(n)?this.updateElementsWithParams(n):s.optionsQueries.hasOwnProperty(n)&&(4!=s.optionsQueries[n].readyState||200==s.optionsQueries[n].status)||(s.optionsQueries[n]=wp.ajax.send("wcpf_editor_rules_builder_get_options",{type:"POST",dataType:"json",data:{param:n,wcpf_tabs_panel_nonce:wcpf_tabs.nonce_save}}).done(function(t){t&&t.hasOwnProperty("optionsHtml")?(s.optionsElements[n]=jQuery(t.optionsHtml),o.updateElementsWithParams(n)):s.optionsQueries.hasOwnProperty(n)&&delete s.optionsQueries[n]}))},s.prototype.updateElementsWithParams=function(t){if("object"==typeof this.optionValue&&this.optionValue)for(var e in this.optionValue){var o=this.optionValue[e];for(var n in o.rules){var r=o.rules[n];if(r.rule.param==t){var i=this.getValueElementByRule(o.id,r.id);i.data("wcpf-loaded-options")||(i.html(s.optionsElements[t].html()),i.data("wcpf-loaded-options",!0),i.parents("td:first").unblock()),this.isRestoredOption=!0,i.val(r.rule.value),i.trigger("change"),this.isRestoredOption=!1}}}},s.prototype.getValueElementByRule=function(t,e){return this.componentElement.find('.rule-group[data-id="'+t+'"] .rule-row[data-id="'+e+'"] .value-select')},s.prototype.changeRuleOption=function(t,e,o,n){this.optionValue&&"object"==typeof this.optionValue||(this.optionValueProp=[]);var r=this.getRuleOption(t,e);if(!r||r.rule[o]!=n){var i=a.default(this.optionValue);r.rule[o]=n,this.isRestoredOption||this.valueChangedEvent.trigger({oldValue:i,value:this.optionValue,control:this})}},s.optionsElements={},s.optionsQueries={},s);function s(){var t=null!==p&&p.apply(this,arguments)||this;return t.isRestoredOption=!1,t}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(103),l=o(43),s=(i=a.default,r(p,i),p.prototype.saveValue=function(){var t=this.optionValue;"object"==typeof t&&(t=l.default(t)),this.panel.options.set(this.optionKey,t)},p.prototype.getValue=function(){var t=this.panel.options.has(this.optionKey)?l.default(this.panel.options.get(this.optionKey)):void 0;return"object"==typeof t&&(t=l.default(t)),t},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(103),l=(i=a.default,r(s,i),s.prototype.saveValue=function(){if(this.panel.hasOwnProperty("editorComponent")){var t=this.panel.editorComponent;(t.hasOwnProperty(this.optionKey)||this.optionKey in t)&&(t[this.optionKey]=this.optionValue)}},s.prototype.getValue=function(){if(this.panel.hasOwnProperty("editorComponent")){var t=this.panel.editorComponent;if(t.hasOwnProperty(this.optionKey)||this.optionKey in t)return t[this.optionKey]}},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(103),l=o(42),s=(i=a.default,r(p,i),Object.defineProperty(p.prototype,"optionsContainer",{get:function(){return this.optionsRepository.container},set:function(t){this.optionsRepository.container=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"optionKey",{get:function(){return this.optionKeyProp?this.optionKeyProp:this.control.optionKey},set:function(t){this.optionKeyProp=t},enumerable:!0,configurable:!0}),p.prototype.saveValue=function(){this.optionsRepository.set(this.optionKey,this.optionValue)},p.prototype.getValue=function(){return this.optionsRepository.has(this.optionKey)?this.optionsRepository.get(this.optionKey):void 0},p);function p(t){var e=i.call(this)||this;return e.optionKeyProp=null,e.optionsRepository=new l.default,t&&(e.optionsRepository.container=t),e}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),l=o(67),s=o(15),p=(i=a.default,r(c,i),c.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},c.prototype.initEditor=function(t){var e=this.register.controlRulesOperations;e.set("==",this.isEqualToOperator),e.set("!=",this.isNotEqualToOperator),e.set(">",this.greaterThanOperator),e.set("<",this.lessThanOperator),e.set(">=",this.greaterThanOrEqualToOperator),e.set("<=",this.lessThanOrEqualToOperator),e.set("in",this.inOperator),e.set("inControl",this.inControlOperator),e.set("notIn",this.notInOperator),e.set("notInControl",this.notInControlOperator)},c.prototype.isEqualToOperator=function(t,e){return Array.isArray(t)?(t=s.default({},t),l.default(t,e.value)):t==e.value},c.prototype.isNotEqualToOperator=function(t,e){return!this.isEqualToOperator(t,e)},c.prototype.greaterThanOperator=function(t,e){return t>e.value},c.prototype.lessThanOperator=function(t,e){return!this.greaterThanOperator(t,e)},c.prototype.greaterThanOrEqualToOperator=function(t,e){return t>=e.value},c.prototype.lessThanOrEqualToOperator=function(t,e){return t<=e.value},c.prototype.inOperator=function(t,e){return-1!==e.value.indexOf(t)},c.prototype.inControlOperator=function(t,e){return Array.isArray(t)?-1!==t.indexOf(e.value):"object"==typeof t&&"hasOwnProperty"in t&&t.hasOwnProperty(e.value)},c.prototype.notInOperator=function(t,e){return!this.inOperator(t,e)},c.prototype.notInControlOperator=function(t,e){return!this.inControlOperator(t,e)},c);function c(){return null!==i&&i.apply(this,arguments)||this}e.default=p},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),j=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],o=0;return e?e.call(t):{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}}},C=this&&this.__read||function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(n=i.next()).done;)a.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a};Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),w=o(56),S=o(42),d=o(8),l=(i=a.default,r(s,i),s.prototype.initialProperties=function(){this.app.componentRegister.set("Editor/Control/ControlLoader",this)},s.prototype.attachEvents=function(t){},s.prototype.reloadControls=function(t,e){var o,n,r=[];try{for(var i=j(t.values()),a=i.next();!a.done;a=i.next()){var l=a.value;r.push(this.collectControlProps(l))}}catch(t){o={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}this.reloadRequest(r,t,e)},s.prototype.reloadControl=function(t,e){this.reloadRequest([this.collectControlProps(t)],[t],e)},s.prototype.collectControlProps=function(t){var e,o,n,r,i,a,l=new S.default({});try{for(var s=j(t.panelLayout.controls.values()),p=s.next();!p.done;p=s.next()){var c=p.value;l.set(c.optionKey,c.optionValue)}}catch(t){e={error:t}}finally{try{p&&!p.done&&(o=s.return)&&o.call(s)}finally{if(e)throw e.error}}var u={},f={},d=[t],h=[],y=t.parentControl,v={};for(t.panel.hasOwnProperty("editorComponent")&&(v=t.panel.editorComponent.entity);y instanceof w.default;)d.push(y),y=y.parentControl;d.reverse();try{for(var m=j(d.values()),_=m.next();!_.done;_=m.next()){c=_.value,h.push(c.optionKey);try{for(var g=j(c.contextControls.entries()),b=g.next();!b.done;b=g.next()){var O=C(b.value,2),P=O[0],E=O[1];f[P]=E.optionValue}}catch(t){i={error:t}}finally{try{b&&!b.done&&(a=g.return)&&a.call(g)}finally{if(i)throw i.error}}u[c.optionKey]=Object.assign({},f)}}catch(t){n={error:t}}finally{try{_&&!_.done&&(r=m.return)&&r.call(m)}finally{if(n)throw n.error}}return{options:l.container,context:f,optionKey:t.optionKey,panelKey:t.panel.panelKey,controlPath:h,parentsContext:u,entity:v}},s.prototype.reloadRequest=function(t,c,u){var e,o,n,r;try{for(var i=j(c.values()),a=i.next();!a.done;a=i.next()){var l=a.value;this.controlRequests.has(l)&&this.controlRequests.get(l).abort(),l.componentElement.block()}}catch(t){e={error:t}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(e)throw e.error}}var s=wp.ajax.send("wcpf_editor_control_reload",{type:"POST",dataType:"json",data:{controls:JSON.stringify(t),wcpf_tabs_panel_nonce:wcpf_tabs.nonce_save}}).done(function(t){var e,o;if(t.items&&Array.isArray(t.items)){try{for(var n=j(t.items.entries()),r=n.next();!r.done;r=n.next()){var i=C(r.value,2),a=i[0],l=i[1];if("object"==typeof l){var s=c[a],p={prevStructure:s.controlStructure,structure:l.structure,controlHtml:l.controlHtml,controlElement:d.default(l.controlHtml)};s.controlStructure=l.structure,"reloadControl"in s&&s.reloadControl(p)}}}catch(t){e={error:t}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(e)throw e.error}}u&&u(c)}}).always(function(){var e,t;try{for(var o=j(c.values()),n=o.next();!n.done;n=o.next())n.value.componentElement.unblock()}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}});try{for(var p=j(c.values()),f=p.next();!f.done;f=p.next())l=f.value,this.controlRequests.set(l,s)}catch(t){n={error:t}}finally{try{f&&!f.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}},s);function s(){var t=i.call(this)||this;return t.controlRequests=new Map,t}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=o(255),s=o(256),p=o(257),c=o(258),u=o(259),f=(i=a.default,r(d,i),d.prototype.getInitialComponents=function(){return[new l.default,new s.default,new p.default,new c.default,new u.default]},d);function d(){return null!==i&&i.apply(this,arguments)||this}e.default=f},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),l=(i=a.default,r(s,i),s.prototype.initialProperties=function(){this.app.componentRegister.set("Editor/Builder/Control",this)},s.prototype.attachEvents=function(t){},s.prototype.createControl=function(t,e){if(!this.prototypes.control.has(t.controlKey))throw new Error("Control class not found by type '"+t.controlKey+"'");var o=this.prototypes.control.get(t.controlKey),n=this.componentBuilder.build(o);if(!this.prototypes.controlSource.has(t.controlSource))throw new Error("Control source by key '"+t.controlSource+"' not found");var r=this.prototypes.controlSource.get(t.controlSource),i=this.componentBuilder.build(r);return(i.control=n).controlSource=i,e&&(n.panelLayout=e),n.controlStructure=t,n},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),l=(i=a.default,r(s,i),s.prototype.initialProperties=function(){this.app.componentRegister.set("Editor/Builder/Panel",this)},s.prototype.attachEvents=function(t){},s.prototype.createPanel=function(t,e,o){if(!this.prototypes.panel.has(t))throw new Error("Panel controller with id '"+t+"' not found");if(o&&!this.register.components.has(o))throw new Error("Editor element with id '"+o+"' not found");var n=this.prototypes.panel.get(t),r=this.componentBuilder.build(n);if(r.panelKey=t,r.panelContext=e,!o&&r.hasOwnProperty("editorComponent"))throw new Error("For controller of '"+t+"' panel, need entity");if(o){var i=this.register.components.get(o);(r.editorComponent=i).hasOwnProperty("panels")&&i.panels.add(r)}return r},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),l=(i=a.default,r(s,i),s.prototype.initialProperties=function(){this.app.componentRegister.set("Editor/Builder/PanelLayout",this)},s.prototype.attachEvents=function(t){},s.prototype.createPanelLayout=function(t){if(!this.register.panelStructures.has(t))throw new Error("Panel structure with id '"+t+"' not found");var e=this.register.panelStructures.get(t),o=this.prototypes.panelLayout.get(e.panelLayoutKey),n=this.componentBuilder.build(o);return n.panelStructure=e,n},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),l=o(138),s=(i=a.default,r(p,i),p.prototype.initialProperties=function(){this.app.componentRegister.set("Editor/Builder/Projection",this)},p.prototype.attachEvents=function(t){},p.prototype.createProjectionByEntityId=function(t){var e=l.default(t,this.projectEntity);if(null==e)throw new Error("Entity by id '"+t+"' not found");return this.createProjectionByEntity(e)},p.prototype.createProjectionByEntity=function(t){if(!this.register.components.has(t.entityId))throw new Error("Element by entity id '"+t.entityId+"' not found");return this.createProjectionByComponent(this.register.components.get(t.entityId))},p.prototype.createProjectionByComponent=function(t){return this.createProjectionByKey(t.entityKey,t)},p.prototype.createProjectionByKey=function(t,e){if(!e.hasOwnProperty("projection"))throw new Error("Element '#"+e.entityId+" - "+e.entityTitle+"' does not have projection support");if(!this.prototypes.projection.has(t))throw new Error("Projection controller prototype by key '"+t+"' not found");var o=this.prototypes.projection.get(t),n=this.componentBuilder.build(o);return e&&((n.editorComponent=e).projection=n),n.projectionKey=t,n.package=this.package,n},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),l=o(138),s=(i=a.default,r(p,i),p.prototype.initialProperties=function(){this.app.componentRegister.set("Editor/Builder/Component",this)},p.prototype.attachEvents=function(t){},p.prototype.createComponentByEntityId=function(t){var e=l.default(t,this.projectEntity);if(null==e)throw new Error("Entity by id '"+t+"' not found");return this.createComponentByEntity(e)},p.prototype.createComponentByEntity=function(t){if(!this.prototypes.component.has(t.entityKey))throw new Error("Element prototype by entity key '"+t.entityKey+"' not found");this.isNumeric(t.entityId)&&(t.entityId=parseFloat(t.entityId)),this.isNumeric(t.parentId)&&(t.parentId=parseFloat(t.parentId));var e=this.prototypes.component.get(t.entityKey),o=this.componentBuilder.build(e);if(o.entity=t,this.register.components.set(t.entityId,o),this.componentBuilder.implementation(o,this.package),t.childEntities.length)for(var n in t.childEntities){var r=t.childEntities[n];this.createComponentByEntity(r)}return o},p.prototype.isNumeric=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=o(261),s=(i=a.default,r(p,i),p.prototype.getInitialComponents=function(){return[new l.default]},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),l=o(262),s=o(263),p=(i=a.default,r(c,i),c.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},c.prototype.initEditor=function(t){t.panel.set("AddElement",l.default),t.control.set("ElementList",s.default)},c);function c(){return null!==i&&i.apply(this,arguments)||this}e.default=p},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(139),l=o(15),s=(i=a.default,r(p,i),p.prototype.attachEvents=function(t){i.prototype.attachEvents.call(this,t),this.options.observable.add("field",this.onElementSelect,this),this.options.observable.add("preset",this.onElementSelect,this),this.options.observable.add("layout",this.onElementSelect,this)},p.prototype.onElementSelect=function(t){var e=t.elementCode,o=t.defaultState;if(this.register.entityTypes.has(e)){var n=this.entityCollector.collectVirtualEntityByKey(e);"object"==typeof o&&(n=l.default(n,o)),n.parentId=this.projectEntity.entityId,this.projectEntity.childEntities.push(n);var r=this.builders.component.createComponentByEntity(n);r.hasOwnProperty("projection")&&this.projectionManager.addProjection(r),this.prototypes.panel.has(n.entityKey)?this.panelManager.openPanel(n.entityKey,n.entityId):(this.panelManager.backPanel(),r.hasOwnProperty("projection")&&this.projectionManager.scrollToProjection(r))}},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(37),l=o(55),s=(i=a.default,r(p,i),p.prototype.attachEvents=function(t){t.addElementHandler(this.componentElement,"click",".element-item[data-element-code]",this.onItemClick)},p.prototype.onItemClick=function(t){var e=l.default(t);this.setElementValue({elementCode:e.data("element-code"),defaultState:e.data("default-state")}),this.updateValueFromElement()},p.prototype.setElementValue=function(t){this.componentElement.find(".element-item[data-element-code].selected").removeClass("selected"),"object"==typeof t&&this.componentElement.find('.element-item[data-element-code="'+t.elementCode+'"]').addClass("selected")},p.prototype.getElementValue=function(){var t=this.componentElement.find(".element-item[data-element-code].selected");return t.length?{elementCode:t.data("element-code"),defaultState:t.data("default-state")}:null},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),p=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],o=0;return e?e.call(t):{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(104),c=o(105),l=o(55),u=o(65),s=(i=a.default,r(f,i),f.prototype.initialProperties=function(){jQuery.hasOwnProperty("blockUI")&&(jQuery.blockUI.defaults.message=null)},f.prototype.attachEvents=function(t){t.addWindowHandler("load",this.onWindowLoaded),t.addComponentHandler("click",".editor-panel .navigation .save-project",this.saveProject),t.addComponentHandler("click",".editor-panel .navigation .add-element",this.onAddElementClick),t.addComponentHandler("click",".panel.projections-panel .view-mode-toggle .view-mode",this.onViewModeClick),t.addWindowHandler("resize",this.onWindowResize)},f.prototype.onViewModeClick=function(t){var e=l.default(t).data("mode");this.setMode(e)},f.prototype.setMode=function(t){this.rootElement.find(".panel.editor-panel").attr("data-panel-mode",t),this.rootElement.find(".panel.projections-panel .view-mode-toggle .view-mode.active").removeClass("active"),this.rootElement.find('.panel.projections-panel .view-mode-toggle .view-mode[data-mode="'+t+'"]').addClass("active")},f.prototype.getMode=function(){var t=this.rootElement.find(".panel.editor-panel").attr("data-panel-mode");return t||(window.innerWidth<this.rowModeWidth?"row":"column")},f.prototype.onWindowResize=function(t){window.innerWidth<this.rowModeWidth&&this.setMode("row")},f.prototype.onWindowLoaded=function(t){if(window.hasOwnProperty("ProductFilterData")){window.innerWidth<this.rowModeWidth?this.setMode("row"):this.setMode("column");var e=window.ProductFilterData,o=(this.builders.component,null);if("edit"==e.pageAction||"new"==e.pageAction){for(var n in this.app.objectContainer.set("PageLinks",{listProject:e.pageLinks.list_project,newProject:e.pageLinks.new_project,editProject:e.pageLinks.edit_project}),this.app.objectContainer.set("Messages",e.messages),e.editor.panels){var r=e.editor.panels[n];this.register.panelStructures.set(n,r)}for(var i in e.registerEntities){var a=e.registerEntities[i];this.register.entityTypes.set(i,{id:a.id,label:a.label,isGrouped:a.is_grouped,defaultOptions:a.default_options})}if(this.editorPackage.initEditorEvent.trigger(this.prototypes),window.hasOwnProperty("ProductFilterProjectData")){var l=window.ProductFilterProjectData;o=this.entityCollector.collectEntityByStructure(l)}else o=this.entityCollector.collectVirtualEntityByKey("Project");"new"==e.pageAction&&e.postId&&(o.entityId=e.postId,o.status=u.default.published);var s=this.builders.component.createComponentByEntity(o);if(this.app.objectContainer.set("Editor/ProjectEntity",o),this.app.objectContainer.set("Editor/ProjectComponent",s),this.editorPackage.projectLoadedEvent.trigger(this.register),this.panelManager.openPanel(o.entityKey,o.entityId),this.panelManager.activePanels.length){var p=this.panelManager.activePanels[0];this.panelManager.checkCorrectnessOfOptions(p)}"new"==e.pageAction&&s.titleChangedEvent.trigger({title:s.entityTitle,oldTitle:s.entityTitle,entity:s.entity,editorComponent:s})}}},f.prototype.saveProject=function(){var e,t,a=this,o=this.app.bodyElement.find("#wpcontent"),n=this.panelManager.activePanels,l=this.app.bodyElement.find(".wcpf-notices-container");if(n.length)try{for(var r=p(n),i=r.next();!i.done;i=r.next()){var s=i.value;if(!this.panelManager.checkCorrectnessOfOptions(s))return;if(this.panelManager.modalToSaveOptions(s),!this.panelManager.checkCorrectnessOfOptions(s))return}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}o.block(),wp.ajax.send("wcpf_save_project",{type:"POST",dataType:"json",data:{projectEntity:JSON.stringify(this.projectEntity),wcpf_tabs_panel_nonce:wcpf_tabs.nonce_save}}).fail(function(t){var e,o;if(l.html(""),t.hasOwnProperty("messages")&&t.messages.length){try{for(var n=p(t.messages),r=n.next();!r.done;r=n.next()){var i=r.value;l.append(a.getMessageTemplate(i))}}catch(t){e={error:t}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(e)throw e.error}}c.default(l.offset().top-window.innerHeight/2,400)}}).done(function(t){if(l.html(""),t.hasOwnProperty("projectId")){var e=a.app.objectContainer.get("PageLinks").editProject;e=e.replace(/\%project_id\%/g,t.projectId),location.href=e}}).always(function(){o.unblock()})},f.prototype.onAddElementClick=function(){this.panelManager.openPanel("AddElement")},f.prototype.getMessageTemplate=function(t){return'<div class="'+t.level+" "+t.level+'-level-message">\n                <p class="text">'+t.text+"</p>\n            </div>"},f);function f(){var t=null!==i&&i.apply(this,arguments)||this;return t.rootSelector=".woocommerce-product-filter-manage-project-wrapper",t.rowModeWidth=1140,t}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(34),l=o(266),s=o(267),p=(i=a.default,r(c,i),Object.defineProperty(c.prototype,"rootElement",{get:function(){return s.default(this)},enumerable:!0,configurable:!0}),c.prototype.getParentEntity=function(){return l.default(this.package,"rootSelector")?this.package:null},c.prototype.getEntityElement=function(t){return s.default(this,t)},c);function c(){var t=null!==i&&i.apply(this,arguments)||this;return t.rootSelector="",t}e.default=p},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t&&t.hasOwnProperty(e)}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(73);e.default=function(t,e){var o=n.default(t,e);return o?jQuery(o):null}},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(104),c=o(8),l=o(67),s=o(105),p=o(15),u=o(68),f=(i=a.default,r(d,i),d.prototype.initialProperties=function(){this.app.componentRegister.set("Editor/PanelManager",this)},d.prototype.attachEvents=function(t){t.addComponentHandler("click",".action-back-panel-on-click",this.backPanel)},d.prototype.checkIfPanelIsOpen=function(t,e,o){for(var n in this.activePanels){var r=this.activePanels[n];if(o&&r.hasOwnProperty("editorComponent")){if(r.editorComponent.entityId==o&&r.panelKey==t&&l.default(e,r.panelContext))return!0}else if(r.panelKey==t&&l.default(e,r.panelContext))return!0}return!1},d.prototype.getCurrentPanel=function(){return this.activePanels.length?this.activePanels[this.activePanels.length-1]:null},d.prototype.openPanel=function(t,e,o){if("string"!=typeof e&&"number"!=typeof e||(o=e,e={}),!t.length)throw new Error("Parameter panel key is empty");if(e=e||{},!this.checkIfPanelIsOpen(t,e,o)){if(this.activePanels.length){var n=this.activePanels[this.activePanels.length-1];if(!this.checkCorrectnessOfOptions(n))return;if(this.modalToSaveOptions(n),!this.checkCorrectnessOfOptions(n))return}var r=this.getTemplate(t);if(null==r)throw new Error("Panel template with id '"+t+"' not found");var i=this.builders.panelLayout.createPanelLayout(t),a=this.builders.panel.createPanel(t,e,o);(i.panel=a).panelLayout=i,a.package=this.package,a.initialProperties();var l=c.default(r(a.getTemplateContext(a.panelContext)));if(l.hide(),this.rootElement.append(l),a.componentElement=i.componentElement=l,this.componentBuilder.implementation(i,this.package),i.assembleControls(i.panelStructure),a.attachEvents(a.eventManager),a.status=u.default.Launched,this.activePanels.length){var s=(n=this.activePanels[this.activePanels.length-1]).componentElement;if(n.status=u.default.Inactive,1<this.activePanels.length){if(n.status=u.default.Destroyed,n.hasOwnProperty("editorComponent")){var p=n.editorComponent;p.hasOwnProperty("panels")&&p.panels.delete(n)}this.activePanels.pop(),this.animationOpen(s,l,function(t,e){t.remove()})}else this.animationOpen(s,l)}else l.show(),l.addClass("status-active");a.status=u.default.Active,this.activePanels.push(a)}},d.prototype.backPanel=function(t){if(t=t||{},t=p.default({ignoreValidation:!1},t),!(this.activePanels.length<=1)){var e=this.activePanels[this.activePanels.length-1],o=e.componentElement;if((t.ignoreValidation||this.checkCorrectnessOfOptions(e))&&(this.modalToSaveOptions(e),t.ignoreValidation||this.checkCorrectnessOfOptions(e))){var n=this.activePanels[this.activePanels.length-2],r=n.componentElement;if(e.status=u.default.Inactive,n.status=u.default.Active,e.status=u.default.Destroyed,e.hasOwnProperty("editorComponent")){var i=e.editorComponent;i.hasOwnProperty("panels")&&i.panels.delete(e)}this.activePanels.pop(),this.animationBack(o,r,function(t,e){t.remove()})}}},d.prototype.checkCorrectnessOfOptions=function(t){return!("validate"in t)||t.validate()},d.prototype.modalToSaveOptions=function(t){if(!t.isControlsSaved){var e=this.localizedMessages.panel.shouldSaveOptionsOnPanel;e=e.replace(/--panel-title/g,t.panelLayout.panelTitle),confirm(e)?t.saveValuesOfControls():t.resetValuesOfControls()}},d.prototype.scrollToPanelElement=function(t){var e=c.default("#wpadminbar"),o=t.offset().top,n=window.scrollY-o;if(200<n||n<-200){var r=o-20;"fixed"==e.css("position")&&(r-=e.height()),s.default(r,500)}},d.prototype.animationOpen=function(t,e,o){e.addClass("status-launched"),e.show(),t.removeClass("status-active").addClass("status-inactive"),e.addClass("status-active"),setTimeout(function(){e.removeClass("status-launched"),o&&o(t,e)},600),this.scrollToPanelElement(e)},d.prototype.animationBack=function(t,e,o){t.removeClass("status-active").addClass("status-destroyed"),e.removeClass("status-inactive").addClass("status-active"),setTimeout(function(){o&&o(t,e)},600)},d.prototype.getTemplate=function(t){var e=this.app.bodyElement.find(".wcpf-panel-template[data-panel-key="+t+"]");if(!e.length)return null;var o=e.attr("id");return o&&0===o.indexOf("tmpl-")?wp.template(o.slice(5)):null},d);function d(){var t=null!==i&&i.apply(this,arguments)||this;return t.rootSelector=".page-editor-container .panel.options-panel",t.activePanels=[],t}e.default=f},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),g=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],o=0;return e?e.call(t):{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(104),l=o(24),b=o(8),s=o(105),O=o(15),h=o(270),y=o(65),P=o(140),p=(i=a.default,r(c,i),Object.defineProperty(c.prototype,"activeProjections",{get:function(){return this.activeProjectionsProp},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"containerElement",{get:function(){return this.rootElement.find(".projections-container")},enumerable:!0,configurable:!0}),c.prototype.initialProperties=function(){this.app.componentRegister.set("Editor/ProjectionManager",this),this.sortableSelectors=[".projections-container",".sort-list"],this.sortableRootSelectors=this.sortableSelectors.map(function(t){return".page-editor-container .projections-panel "+t}).join(","),this.sortableOptions={items:".sort-item",acceptFrom:this.sortableSelectors.join(", "),placeholder:'<div class="projection projection-placeholder"></div>',forcePlaceholderSize:!1}},c.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.projectLoadedEvent,this.onProjectLoaded),t.addWindowHandler("load",this.onWindowLoad)},c.prototype.onWindowLoad=function(t){this.attachSortableEvents(),sortable(this.sortableRootSelectors,this.sortableOptions),this.sortingIsInitialized=!0},c.prototype.reloadSortable=function(){if(this.sortingIsInitialized){sortable(this.sortableRootSelectors,"destroy"),sortable(this.sortableRootSelectors,this.sortableOptions),this.attachSortableEvents();var t=sortable(this.sortableRootSelectors,"serialize");for(var e in t){var o=t[e];for(var n in o.items){var r=o.items[n],i=b.default(r.node).data("entity-id");this.register.components.has(i)&&(this.register.components.get(i).entityOrder=n)}}}},c.prototype.attachSortableEvents=function(){var n=this,t=this.app.bodyElement.find(this.sortableRootSelectors),r="wcpf-is-attached-sortable-events";t.each(function(t,e){var o=b.default(e);o.data(r)||(e.addEventListener("sortupdate",l.default(n.onSortUpdate,n)),o.data(r,!0))})},c.prototype.onSortUpdate=function(t){var e,o,n,r,i={node:t.detail.origin.container,items:t.detail.origin.items},a={node:t.detail.destination.container,items:t.detail.destination.items},l={node:t.detail.item},s=!1;try{for(var p=g([a,i,l]),c=p.next();!c.done;c=p.next()){var u=c.value;u.editorComponent=null,u.projection=null,u.element=b.default(u.node),u.element.hasClass("sort-list")&&(u.element=u.element.parents(".sort-item:first")),u.element.hasClass("projections-container")?u.entityId=this.projectEntity.entityId:u.entityId=u.element.data("entity-id"),this.register.components.has(u.entityId)&&(u.editorComponent=this.register.components.get(u.entityId),u.editorComponent&&u.editorComponent.hasOwnProperty("projection")&&(u.projection=u.editorComponent.projection))}}catch(t){e={error:t}}finally{try{c&&!c.done&&(o=p.return)&&o.call(p)}finally{if(e)throw e.error}}a.element.get(0).isSameNode(i.element.get(0))&&(s=!0);var f={editorComponent:l.editorComponent,nextContainerComponent:a.editorComponent,prevContainerComponent:i.editorComponent};l.editorComponent&&(a.editorComponent?l.editorComponent.entityParentId=a.editorComponent.entityId:l.editorComponent.entityParentId=this.projectEntity.entityId),l.projection&&l.projection.moveProjectionEvent.trigger(O.default({isSameContainer:s},f)),s?a.projection&&a.projection.hasOwnProperty("moveChildProjectionEvent")&&a.projection.moveChildProjectionEvent.trigger(O.default({direction:P.default.same},f)):(a.projection&&a.projection.hasOwnProperty("moveChildProjectionEvent")&&a.projection.moveChildProjectionEvent.trigger(O.default({direction:P.default.inside},f)),i.projection&&i.projection.hasOwnProperty("moveChildProjectionEvent")&&i.projection.moveChildProjectionEvent.trigger(O.default({direction:P.default.outside},f)));try{for(var d=g(s?[a]:[i,a]),h=d.next();!h.done;h=d.next()){var y=h.value;for(var v in y.items){var m,_=b.default(y.items[v]);m=_.data("entity-id"),this.register.components.has(m)&&(this.register.components.get(m).entityOrder=v)}}}catch(t){n={error:t}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}},c.prototype.onProjectLoaded=function(){var e,t;try{for(var o=g(this.register.components.values()),n=o.next();!n.done;n=o.next()){var r=n.value;this.prototypes.projection.has(r.entityKey)&&r.hasOwnProperty("projection")&&this.addProjection(r)}}catch(t){e={error:t}}finally{try{n&&!n.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},c.prototype.hasProjection=function(t){for(var e in this.activeProjections)if(this.activeProjections[e].editorComponent.entityId==t.entityId)return!0;return!1},c.prototype.addProjection=function(t){if(!this.hasProjection(t)){if(!this.prototypes.projection.has(t.entityKey))throw new Error("Projection controller prototype with id '"+t.entityKey+"' not found");if(!t.hasOwnProperty("projection"))throw new Error("Element '#"+t.entityId+" - "+t.entityTitle+"' does not have projection support");var e=this.builders.projection.createProjectionByComponent(t),o=this.getTemplate(e.projectionKey);if(null==o)throw new Error("Projection template with id '"+e.projectionKey+"' not found");this.activeProjectionsProp.push(e),e.initialProperties();var n=b.default(o(e.getTemplateContext()));e.componentElement=n;var r=!0;if(t.entityParentId&&this.register.components.has(t.entityParentId)){for(var i=this.register.components.get(t.entityParentId),a=!1;;){if(i.hasOwnProperty("projection")){a=!0;break}if(!this.register.components.has(i.entityParentId))break;i=this.register.components.get(i.entityParentId)}if(a){!i.projection&&this.prototypes.projection.has(i.entityKey)&&this.addProjection(i);var l=i.projection;l&&"insertChildComponentElement"in l&&(l.insertChildComponentElement(n,t),r=!1)}}if(r&&this.containerElement.append(n),e.initialProjection(),e.attachEvents(e.eventManager),t.entity.childEntities.length)for(var s in t.entity.childEntities){var p=t.entity.childEntities[s],c=this.register.components.get(p.entityId);c&&c.hasOwnProperty("projection")&&this.addProjection(c)}this.reloadSortable(),this.triggerZoneState()}},c.prototype.moveProjection=function(t,e){if(!t.hasOwnProperty("projection"))throw new Error("Element '#"+t.entityId+" - "+t.entityTitle+"' does not have projection support");var o=!0,n=(t.projection,this.containerElement),r=this.containerElement;if(this.register.components.has(t.entity.parentId)){var i=this.register.components.get(t.entity.parentId);i.hasOwnProperty("projection")&&i.projection&&(n=i.projection.componentElement)}if(e.hasOwnProperty("projection")){var a=e.projection;a&&"insertChildComponentElement"in a&&(a.insertChildComponentElement(t.projection.componentElement,t),r=a.componentElement,o=!1)}o&&this.containerElement.append(t.projection.componentElement);var l="> "+this.sortableSelectors.join(", > ");this.onSortUpdate({detail:{origin:{container:n.get(0),items:n.find(l).toArray()},destination:{container:r.get(0),items:r.find(l).toArray()},item:t.projection.componentElement.get(0)}})},c.prototype.removeProjection=function(e,t){var o,n,r,i,a=this;if(!e.hasOwnProperty("projection"))throw new Error("Element '#"+e.entityId+" - "+e.entityTitle+"' does not have projection support");if(confirm(this.localizedMessages.projection.shouldRemoveElement)){var l=e.projection;if(l){if(e.entity.childEntities.length)try{for(var s=g(e.entity.childEntities),p=s.next();!p.done;p=s.next()){var c=p.value;this.register.components.has(c.entityId)&&this.moveProjection(this.register.components.get(c.entityId),this.projectEditorComponent)}}catch(t){o={error:t}}finally{try{p&&!p.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}void 0!==t&&!t||(e.entityStatus=y.default.remove,e.entity.childEntities.length&&h.default(e.entity,function(t){a.register.components.get(t.entityId).status=y.default.remove}));try{for(var u=g(this.panelManager.activePanels),f=u.next();!f.done;f=u.next()){var d=f.value;if(d.hasOwnProperty("editorComponent")&&d.editorComponent.entityId==e.entityId){this.panelManager.backPanel({ignoreValidation:!0});break}}}catch(t){r={error:t}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}l.componentElement.remove(),this.activeProjectionsProp=this.activeProjectionsProp.filter(function(t){return t.editorComponent.entityId!=e.entityId}),e.projection=null,this.reloadSortable(),this.triggerZoneState()}}},c.prototype.scrollToProjection=function(t){if(t.hasOwnProperty("projection")){var e=t.projection.componentElement.offset().top-window.innerHeight/2;s.default(e,500)}},c.prototype.triggerZoneState=function(){var t=this.rootElement.find(".projections-zone");this.activeProjections.length?t.removeClass("empty-state"):t.addClass("empty-state")},c.prototype.getTemplate=function(t){var e=this.app.bodyElement.find(".wcpf-projection-template[data-projection-key="+t+"]");if(!e.length)return null;var o=e.attr("id");return o&&0===o.indexOf("tmpl-")?wp.template(o.slice(5)):null},c);function c(){var t=null!==i&&i.apply(this,arguments)||this;return t.rootSelector=".page-editor-container .panel.projections-panel",t.activeProjectionsProp=[],t.sortableOptions={},t.sortingIsInitialized=!1,t}e.default=p},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,o){for(var n in e.childEntities){var r=e.childEntities[n];o(r),r.childEntities.length&&t(r,o)}}},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=o(272),s=(i=a.default,r(p,i),p.prototype.getInitialComponents=function(){return[new l.default]},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],o=0;return e?e.call(t):{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}}},f=this&&this.__read||function(t,e){var o="function"==typeof Symbol&&t[Symbol.iterator];if(!o)return t;var n,r,i=o.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(n=i.next()).done;)a.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return a};Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),l=o(8),s=o(24),p=(i=a.default,r(c,i),Object.defineProperty(c.prototype,"validator",{get:function(){return jQuery.validator},enumerable:!0,configurable:!0}),c.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},c.prototype.initEditor=function(){this.validator.setDefaults({debug:!0,ignore:".control-inactive,*:not([name])",errorPlacement:s.default(this.errorPlacement,this)});var t={filterKeyText:"",filterKeyUniquer:"",requiredIfActiveControl:this.validator.messages.required};if(this.localizedMessages.hasOwnProperty("validatorErrors"))for(var e in this.localizedMessages.validatorErrors){var o=this.localizedMessages.validatorErrors[e];t[e]=this.validator.format(o)}this.validator.addMethod("requiredIfActiveControl",s.default(this.requiredIfActiveControlMethod,this),t.requiredIfActiveControl),this.validator.addMethod("requiredUnit",s.default(this.requiredUnit,this),this.validator.messages.required),this.validator.addMethod("filterKeyText",s.default(this.filterKeyTextMethod,this),t.filterKeyText),this.validator.addMethod("filterKeyUniquer",s.default(this.filterKeyUniquerMethod,this),t.filterKeyUniquer),this.validator.addMethod("filterKeyUniquerDepends",s.default(this.filterKeyUniquerDependsMethod,this),t.filterKeyUniquer)},c.prototype.requiredUnit=function(t,e){var o=l.default(e).parents("form.panel-form");return s.default(this.validator.methods.required,o.data("validator"))(t,e,function(t){return 0<l.default(t).parents(".control-inputs-container:first").find(".text-size").val().length})},c.prototype.errorPlacement=function(t,e){var o=e.parents(".control:first").find(".validation-errors-container:first");o.length?o.append(t):t.insertAfter(e.get(0))},c.prototype.requiredIfActiveControlMethod=function(t,e,o){var n=l.default(e),r=n.parents(".control:first"),i=n.parents("form.panel-form");return!(!r.hasClass("control-inactive")&&i.data("validator"))||s.default(this.validator.methods.required,i.data("validator"))(t,e,o)},c.prototype.filterKeyTextMethod=function(t,e){return/^[\w\d0-9\-\_]*$/.test(t)},c.prototype.filterKeyUniquerMethod=function(t,e,o){var n,r,i=this.panelManager.getCurrentPanel(),a=null;i.hasOwnProperty("editorComponent")&&(a=i.editorComponent.entityId);try{for(var l=u(this.register.components),s=l.next();!s.done;s=l.next()){var p=f(s.value,2),c=(p[0],p[1]);if(a!=c.entityId&&"remove"!=c.entityStatus&&"getFilterKeys"in c&&-1!=c.getFilterKeys().indexOf(t))return!1}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return!0},c.prototype.filterKeyUniquerDependsMethod=function(t,e,o){var n,r,i=this.panelManager.getCurrentPanel();if(Array.isArray(o))try{for(var a=u(o),l=a.next();!l.done;l=a.next()){var s=l.value,p=i.panelLayout.controls.get(s);if(p&&p.optionValue==t)return!1}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return!0},c);function c(){return null!==i&&i.apply(this,arguments)||this}e.default=p},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=o(274),s=(i=a.default,r(p,i),p.prototype.getInitialComponents=function(){return[new l.default]},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),l=o(275),s=o(277),p=(i=a.default,r(c,i),c.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},c.prototype.initEditor=function(t){t.panel.set("Project",l.default),t.component.set("Project",s.default)},c);function c(){return null!==i&&i.apply(this,arguments)||this}e.default=p},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(57),l=(i=a.default,r(s,i),s.prototype.getValidatorOptions=function(){return{rules:{entityTitle:{required:!0,minlength:2},filteringStarts:{required:!0},productsContainerSelector:{requiredIfActiveControl:!0},paginationSelector:{requiredIfActiveControl:!0},resultCountSelector:{requiredIfActiveControl:!0},sortingSelector:{requiredIfActiveControl:!0}}}},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),a=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],o=0;return e?e.call(t):{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var l,i=o(16),s=o(15),p=o(139),c=(l=p.default,r(u,l),u.prototype.attachEvents=function(t){var e,o;l.prototype.attachEvents.call(this,t);try{for(var n=a(this.panelLayout.controls.values()),r=n.next();!r.done;r=n.next()){var i=r.value;t.addSystemHandler(i.valueChangedEvent,this.validate)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(o=n.return)&&o.call(n)}finally{if(e)throw e.error}}},u.prototype.onLaunched=function(){var t=this.getValidatorOptions(),e=this.formElement.validate(t);e&&e.hasOwnProperty("settings")&&(e.settings=s.default(e.settings,t)),this.afterInitValidationEvent.trigger({panel:this,formElement:this.formElement,options:t})},u.prototype.onFormSubmit=function(t){l.prototype.onFormSubmit.call(this,t),this.saveValuesOfControls()},u.prototype.validate=function(){var t=this.formElement.valid();return this.validateEvent.trigger({isValid:t,panel:this}),t},u.prototype.saveValuesOfControls=function(){this.validate()&&l.prototype.saveValuesOfControls.call(this)},u.prototype.resetValuesOfControls=function(){var t=this.panelLayout.isControlsSaved;l.prototype.resetValuesOfControls.call(this),t||this.validate()},u.prototype.getValidatorOptions=function(){return{}},u);function u(){var t=l.call(this)||this;return t.afterInitValidationEvent=new i.default,t.validateEvent=new i.default,t}e.default=c},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(106),l=(i=a.default,r(s,i),s.prototype.attachEvents=function(t){i.prototype.attachEvents.call(this,t),t.addSystemHandler(this.titleChangedEvent,this.onTitleChanged)},s.prototype.onTitleChanged=function(t){this.app.bodyElement.find(".wp-heading-inline .project-name").html(t.title)},s);function s(){var t=null!==i&&i.apply(this,arguments)||this;return t.panels=new Set,t}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=o(279),s=o(281),p=o(283),c=o(285),u=o(288),f=o(292),d=o(295),h=o(297),y=(i=a.default,r(v,i),v.prototype.getInitialSubpackages=function(){return[new l.default,new s.default,new p.default,new c.default,new u.default,new f.default,new d.default,new h.default]},v.prototype.getInitialComponents=function(){return[]},v);function v(){return null!==i&&i.apply(this,arguments)||this}e.default=y},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=o(280),s=(i=a.default,r(p,i),p.prototype.getInitialComponents=function(){return[new l.default]},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),l=o(58),s=o(59),p=o(38),c=(i=a.default,r(u,i),u.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},u.prototype.initEditor=function(t){t.component.set("CheckBoxListField",s.default),t.panel.set("CheckBoxListField",l.default),t.projection.set("CheckBoxListField",p.default)},u);function u(){return null!==i&&i.apply(this,arguments)||this}e.default=c},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=o(282),s=(i=a.default,r(p,i),p.prototype.getInitialComponents=function(){return[new l.default]},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),l=o(58),s=o(59),p=o(38),c=(i=a.default,r(u,i),u.prototype.attachEvents=function(t){this.app.packageRegister.get("Editor/Package"),t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},u.prototype.initEditor=function(t){t.component.set("RadioListField",s.default),t.panel.set("RadioListField",l.default),t.projection.set("RadioListField",p.default)},u);function u(){return null!==i&&i.apply(this,arguments)||this}e.default=c},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=o(284),s=(i=a.default,r(p,i),p.prototype.getInitialComponents=function(){return[new l.default]},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),l=o(58),s=o(59),p=o(38),c=(i=a.default,r(u,i),u.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},u.prototype.initEditor=function(t){t.component.set("DropDownListField",s.default),t.panel.set("DropDownListField",l.default),t.projection.set("DropDownListField",p.default)},u);function u(){return null!==i&&i.apply(this,arguments)||this}e.default=c},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=o(286),s=(i=a.default,r(p,i),p.prototype.getInitialComponents=function(){return[new l.default]},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),l=o(287),s=o(107),p=o(38),c=(i=a.default,r(u,i),u.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},u.prototype.initEditor=function(t){t.component.set("ButtonField",s.default),t.panel.set("ButtonField",l.default),t.projection.set("ButtonField",p.default)},u);function u(){return null!==i&&i.apply(this,arguments)||this}e.default=c},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(57),l=o(15),s=(i=a.default,r(p,i),p.prototype.getValidatorOptions=function(){return l.default(i.prototype.getValidatorOptions.call(this),{rules:{entityTitle:{required:!0,minlength:2},action:{required:!0}}})},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=o(289),s=(i=a.default,r(p,i),p.prototype.getInitialComponents=function(){return[new l.default]},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),l=o(290),s=o(291),p=o(38),c=(i=a.default,r(u,i),u.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},u.prototype.initEditor=function(t){t.component.set("PriceSliderField",s.default),t.panel.set("PriceSliderField",l.default),t.projection.set("PriceSliderField",p.default)},u);function u(){return null!==i&&i.apply(this,arguments)||this}e.default=c},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(57),l=o(15),s=(i=a.default,r(p,i),p.prototype.getValidatorOptions=function(){return l.default(i.prototype.getValidatorOptions.call(this),{rules:{entityTitle:{required:!0,minlength:2},optionKey:{requiredIfActiveControl:!0,filterKeyText:!0,filterKeyUniquer:!0,minlength:2},minPriceOptionKey:{requiredIfActiveControl:!0,filterKeyText:!0,filterKeyUniquer:!0,minlength:2},maxPriceOptionKey:{requiredIfActiveControl:!0,filterKeyText:!0,filterKeyUniquer:!0,filterKeyUniquerDepends:["minPriceOptionKey"],minlength:2}}})},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(107),l=(i=a.default,r(s,i),s.prototype.getFilterKeys=function(){var t=[];return"dash"==this.options.get("optionKeyFormat")?t.push(this.options.get("optionKey")):"two"==this.options.get("optionKeyFormat")&&(t.push(this.options.get("minPriceOptionKey")),t.push(this.options.get("maxPriceOptionKey"))),t},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=o(293),s=(i=a.default,r(p,i),p.prototype.getInitialComponents=function(){return[new l.default]},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),l=o(294),s=o(59),p=o(38),c=(i=a.default,r(u,i),u.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},u.prototype.initEditor=function(t){t.component.set("BoxListField",s.default),t.panel.set("BoxListField",l.default),t.projection.set("BoxListField",p.default)},u);function u(){return null!==i&&i.apply(this,arguments)||this}e.default=c},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(58),l=o(15),s=(i=a.default,r(p,i),p.prototype.getValidatorOptions=function(){var t=i.prototype.getValidatorOptions.call(this);return t.rules=l.default(t.rules,{boxSize:{required:!0,number:!0,min:1},boxSizeUnit:{requiredUnit:!0}}),t},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=o(296),s=(i=a.default,r(p,i),p.prototype.getInitialComponents=function(){return[new l.default]},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),l=o(58),s=o(59),p=o(38),c=(i=a.default,r(u,i),u.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},u.prototype.initEditor=function(t){t.component.set("TextListField",s.default),t.panel.set("TextListField",l.default),t.projection.set("TextListField",p.default)},u);function u(){return null!==i&&i.apply(this,arguments)||this}e.default=c},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=o(298),s=(i=a.default,r(p,i),p.prototype.getInitialComponents=function(){return[new l.default]},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),l=o(299),s=o(59),p=o(38),c=(i=a.default,r(u,i),u.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},u.prototype.initEditor=function(t){t.component.set("ColorListField",s.default),t.panel.set("ColorListField",l.default),t.projection.set("ColorListField",p.default)},u);function u(){return null!==i&&i.apply(this,arguments)||this}e.default=c},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(58),l=o(15),s=(i=a.default,r(p,i),p.prototype.getValidatorOptions=function(){var t=i.prototype.getValidatorOptions.call(this);return t.rules=l.default(t.rules,{colors:{repeaterItem:{type:{required:!0},term:{required:!0},markerStyle:{required:!0},color:{requiredIfActiveControl:!0}}}}),t},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=o(301),s=o(306),p=(i=a.default,r(c,i),c.prototype.getInitialSubpackages=function(){return[new l.default,new s.default]},c.prototype.getInitialComponents=function(){return[]},c);function c(){return null!==i&&i.apply(this,arguments)||this}e.default=p},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=o(302),s=(i=a.default,r(p,i),p.prototype.getInitialComponents=function(){return[new l.default]},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),l=o(303),s=o(142),p=o(304),c=(i=a.default,r(u,i),u.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},u.prototype.initEditor=function(t){t.component.set("ColumnsLayout",s.default),t.panel.set("ColumnsLayoutItem",l.default),t.projection.set("ColumnsLayout",p.default)},u);function u(){return null!==i&&i.apply(this,arguments)||this}e.default=c},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(57),l=o(42),s=(i=a.default,r(p,i),p.prototype.createOptionsRepository=function(){var t=this.editorComponent.entity.options.columns[this.panelContext.columnIndex].options;return new l.default(t)},p.prototype.getValidatorOptions=function(){return{rules:{width:{required:!0,number:!0,min:1},widthUnit:{requiredUnit:!0}}}},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),u=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],o=0;return e?e.call(t):{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(143),l=o(55),s=o(8),p=o(102),c=o(140),f=(i=a.default,r(d,i),Object.defineProperty(d.prototype,"columns",{get:function(){return this.entityOptions.get("columns")},set:function(t){this.entityOptions.set("columns",t)},enumerable:!0,configurable:!0}),d.prototype.initialProjection=function(){i.prototype.initialProjection.call(this),Array.isArray(this.columns)||(this.columns=p.default(this.columns));for(var t=0;t<this.columns.length;t++)Array.isArray(this.columns[t].entities)||(this.columns[t].entities=p.default(this.columns[t].entities)),Array.isArray(this.columns[t].options)&&(this.columns[t].options=Object.assign({},this.columns[t].options)),this.createColumnElement(t)},d.prototype.attachEvents=function(t){i.prototype.attachEvents.call(this,t),t.addSystemHandler(this.moveChildProjectionEvent,this.onMoveChildProjection),this.addElementHandler("click",".actions-wrapper.entity-id-"+this.editorComponent.entityId+" .add-column-action",this.onAddColumnClick),this.addElementHandler("click",".column-item .actions.entity-id-"+this.editorComponent.entityId+" .remove-action",this.onRemoveColumnClick),this.addElementHandler("click",".column-item .actions.entity-id-"+this.editorComponent.entityId+" .edit-action",this.onEditColumnClick)},d.prototype.onEditColumnClick=function(t){var e=l.default(t).parents(".column-item:first").data("column-index");this.panelManager.openPanel("ColumnsLayoutItem",{columnIndex:e},this.editorComponent.entityId)},d.prototype.onRemoveColumnClick=function(t){var e=l.default(t).parents(".column-item:first").data("column-index");this.removeColumn(e)},d.prototype.onAddColumnClick=function(t){var e=this.createEmptyColumn();this.panelManager.openPanel("ColumnsLayoutItem",{columnIndex:e},this.editorComponent.entityId)},d.prototype.onMoveChildProjection=function(t){t.editorComponent.hasOwnProperty("projection")&&(t.direction==c.default.same?(this.outsideChild(t.editorComponent),this.insideChild(t.editorComponent)):t.direction==c.default.inside?this.insideChild(t.editorComponent):t.direction==c.default.outside&&this.outsideChild(t.editorComponent))},d.prototype.insideChild=function(t){var e=t.projection.componentElement,o=".column-item.entity-id-"+this.editorComponent.entityId,n=e.parents(o).data("column-index"),r=this.columns;r[n].entities.push(t.entityId),this.columns=r},d.prototype.outsideChild=function(e){var o,t,n=0,r=this.columns;for(var i in r){var a=r[i];try{for(var l=u(a.entities),s=l.next();!s.done;s=l.next())if(s.value==e.entityId){n=i;break}}catch(t){o={error:t}}finally{try{s&&!s.done&&(t=l.return)&&t.call(l)}finally{if(o)throw o.error}}}r[n].entities=r[n].entities.filter(function(t){return t!=e.entityId}),this.columns=r},d.prototype.insertChildComponentElement=function(t,e){var o,n,r=this.columns,i=0;for(var a in r){var l=r[a];try{for(var s=u(l.entities),p=s.next();!p.done;p=s.next())if(p.value==e.entityId){i=a;break}}catch(t){o={error:t}}finally{try{p&&!p.done&&(n=s.return)&&n.call(s)}finally{if(o)throw o.error}}}this.getColumnContentElement(i).append(t)},d.prototype.createEmptyColumn=function(){var t=this.columns;t.push({entities:[],options:{}});var e=(this.columns=t).length-1;return this.createColumnElement(e),e},d.prototype.createColumnElement=function(t){var e=s.default('\n            <div class="column-item column-item-'+t+" entity-id-"+this.editorComponent.entityId+'"\n                data-column-index="'+t+'">\n                <div class="column-header">\n                    <div class="column-title">\n                        <span class="text">'+this.localizedMessages.columnsLayout.column+" "+t+'</span>\n                    </div>\n                    <div class="actions entity-id-'+this.editorComponent.entityId+'">\n                        <div class="button-link edit-action">\n                            <span class="text">'+this.localizedMessages.columnsLayout.edit+'</span>\n                        </div>\n                        <div class="button-link remove-action">\n                            <span class="text">'+this.localizedMessages.columnsLayout.remove+'</span>\n                        </div>\n                    </div>\n                </div>\n                <div class="sort-list column-content entity-id-'+this.editorComponent.entityId+'"></div>\n            </div>\n        ');return this.componentElement.find(".body-container:first").append(e),this.projectionManager.reloadSortable(),e},d.prototype.removeColumn=function(t){var e,o;if(0!=t){var n=this.columns;if(n.length>t&&0<=t){var r=n[t].entities;n.splice(t,1),this.columns=n;try{for(var i=u(r),a=i.next();!a.done;a=i.next()){var l=a.value;this.register.components.has(l)&&this.projectionManager.moveProjection(this.register.components.get(l),this.editorComponent)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(e)throw e.error}}this.removeColumnElement(t);for(var s=t+1;s<=n.length;s++){var p=s-1,c=this.getColumnElement(s);c.removeClass("column-item-"+s).addClass("column-item-"+p).attr("data-column-index",p),c.find("> .column-header .column-title .text").html(this.localizedMessages.columnsLayout.column+" "+p)}}}},d.prototype.removeColumnElement=function(t){this.getColumnElement(t).remove(),this.projectionManager.reloadSortable()},d.prototype.getColumnElement=function(t){return this.componentElement.find(".column-item.column-item-"+t+".entity-id-"+this.editorComponent.entityId)},d.prototype.getColumnContentElement=function(t){return this.componentElement.find(".column-item.column-item-"+t+" .column-content.entity-id-"+this.editorComponent.entityId)},d);function d(){return null!==i&&i.apply(this,arguments)||this}e.default=f},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(16),l=o(141),s=(i=l.default,r(p,i),p);function p(){var t=i.call(this)||this;return t.moveChildProjectionEvent=new a.default,t}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(1),l=o(307),s=(i=a.default,r(p,i),p.prototype.getInitialComponents=function(){return[new l.default]},p);function p(){return null!==i&&i.apply(this,arguments)||this}e.default=s},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(9),l=o(142),s=o(308),p=o(309),c=(i=a.default,r(u,i),u.prototype.attachEvents=function(t){t.addSystemHandler(this.editorPackage.initEditorEvent,this.initEditor)},u.prototype.initEditor=function(t){t.component.set("SimpleBoxLayout",l.default),t.panel.set("SimpleBoxLayout",p.default),t.projection.set("SimpleBoxLayout",s.default)},u);function u(){return null!==i&&i.apply(this,arguments)||this}e.default=c},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(143),l=(i=a.default,r(s,i),Object.defineProperty(s.prototype,"titleElement",{get:function(){return this.componentElement.find(".title-container.entity-id-"+this.editorComponent.entityId+" .entity-title")},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"containerElement",{get:function(){return this.componentElement.find(".sort-list.entity-id-"+this.editorComponent.entityId)},enumerable:!0,configurable:!0}),s.prototype.attachEvents=function(t){i.prototype.attachEvents.call(this,t),t.addSystemHandler(this.editorComponent.titleChangedEvent,this.onTitleChanged)},s.prototype.onTitleChanged=function(t){this.titleElement.html(t.title)},s.prototype.insertChildComponentElement=function(t,e){this.containerElement.append(t)},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l},function(t,e,o){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var i,a=o(57),l=(i=a.default,r(s,i),s.prototype.getValidatorOptions=function(){return{rules:{entityTitle:{required:!0,minlength:2},defaultToggleState:{requiredIfActiveControl:!0}}}},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.default=l}]);
