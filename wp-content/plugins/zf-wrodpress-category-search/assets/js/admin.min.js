!function($){"use strict";function dependOn(name){var name=$(name),value=name.val(),name=name.attr("name");$('[data-for="'+name+'"]').each(function(){var _this=$(this),el_value=_this.attr("data-value");void 0!==el_value?(el_value=el_value.split(","),$.inArray(value,el_value)<0?_this.hide():_this.show()):_this.hide()})}function init_custom_post_type(){function on_checkbox_multiple(){$('#advanced-multiple-elements input[type="checkbox"]').on("change",function(){custom_post_type_data()})}on_checkbox_multiple(),$("#elements-box .sortable-elements").sortable({connectWith:"#elements-box .sortable-elements",update:function(e,ui){custom_post_type_data()},stop:function(e,ui){on_checkbox_multiple()}}),$('#advanced-multiple-elements input[type="checkbox"]:not(.is-checkbox-field)').on("click",function(){var key=$(this).attr("data-key");$(this).prop("checked")?$("#use-checkbox-"+key).removeAttr("disabled"):$("#use-checkbox-"+key).attr("disabled",!0)})}function custom_post_type_data(){var data={},advanced_multiple=[],use_checkbox=[];$("#elements-box ul.sortable-elements").each(function(){data[$(this).attr("data-key")]=$(this).sortable("toArray").join(",")});var advanced_arr=data.advanced.split(",");$('#advanced-multiple-elements input[type="checkbox"]').each(function(){var check_key=$(this).attr("data-key");-1<$.inArray(""+check_key,advanced_arr)||$(this).parent().parent().remove()}),$("#advanced-search-box ul.sortable-elements li").each(function(){0<$("#advanced-multiple-elements #checkbox-"+$(this).attr("data-key")).length||$("#advanced-multiple-elements").append('<li><label for="checkbox-'+$(this).attr("data-key")+'"><input type="checkbox" name="checkbox-'+$(this).attr("data-key")+'" id="checkbox-'+$(this).attr("data-key")+'" data-key="'+$(this).attr("data-key")+'"> '+$(this).attr("data-label")+'</label><label class="use-checkbox"><input type="checkbox" name="use-checkbox-'+$(this).attr("data-key")+'" id="use-checkbox-'+$(this).attr("data-key")+'" class="is-checkbox-field" disabled="true" data-key="'+$(this).attr("data-key")+'"> Use checkbox?</label></li>')}),$('#advanced-multiple-elements input[type="checkbox"]').each(function(){$(this).is(":checked")&&($(this).hasClass("is-checkbox-field")?use_checkbox:advanced_multiple).push($(this).attr("data-key"))}),data["advanced-multiple"]=advanced_multiple.join(","),data["use-checkbox"]=use_checkbox.join(","),$("#custom_post_type_data").val(JSON.stringify(data))}$(".zf-depend").each(function(){dependOn(this)}),$(".zf-depend").on("change",function(){dependOn(this)}),$("#custom_post_type").on("change",function(){var data={action:"get_custom_post_type_layout",custom_post_type:$(this).val()};$.ajax({url:ajaxurl,type:"POST",data:data,beforeSend:function(){$("#elements-box").html('<span class="zf-loading"></span>')},success:function(data){$("#elements-box").html(data),init_custom_post_type()}})}),init_custom_post_type()}(jQuery);